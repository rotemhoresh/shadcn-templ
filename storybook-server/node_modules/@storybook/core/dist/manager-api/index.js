var Sl = Object.create;
var Ze = Object.defineProperty;
var Il = Object.getOwnPropertyDescriptor;
var xl = Object.getOwnPropertyNames;
var Al = Object.getPrototypeOf, El = Object.prototype.hasOwnProperty;
var a = (e, t) => Ze(e, "name", { value: t, configurable: !0 }), Pe = /* @__PURE__ */ ((e) => typeof require < "u" ? require : typeof Proxy <
"u" ? new Proxy(e, {
  get: (t, r) => (typeof require < "u" ? require : t)[r]
}) : e)(function(e) {
  if (typeof require < "u") return require.apply(this, arguments);
  throw Error('Dynamic require of "' + e + '" is not supported');
});
var p = (e, t) => () => (t || e((t = { exports: {} }).exports, t), t.exports), B = (e, t) => {
  for (var r in t)
    Ze(e, r, { get: t[r], enumerable: !0 });
}, _l = (e, t, r, n) => {
  if (t && typeof t == "object" || typeof t == "function")
    for (let o of xl(t))
      !El.call(e, o) && o !== r && Ze(e, o, { get: () => t[o], enumerable: !(n = Il(t, o)) || n.enumerable });
  return e;
};
var j = (e, t, r) => (r = e != null ? Sl(Al(e)) : {}, _l(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  t || !e || !e.__esModule ? Ze(r, "default", { value: e, enumerable: !0 }) : r,
  e
));

// ../node_modules/lodash/_listCacheClear.js
var a0 = p((Z8, r0) => {
  function bl() {
    this.__data__ = [], this.size = 0;
  }
  a(bl, "listCacheClear");
  r0.exports = bl;
});

// ../node_modules/lodash/eq.js
var ae = p((tg, n0) => {
  function Pl(e, t) {
    return e === t || e !== e && t !== t;
  }
  a(Pl, "eq");
  n0.exports = Pl;
});

// ../node_modules/lodash/_assocIndexOf.js
var Me = p((ag, o0) => {
  var Ml = ae();
  function Cl(e, t) {
    for (var r = e.length; r--; )
      if (Ml(e[r][0], t))
        return r;
    return -1;
  }
  a(Cl, "assocIndexOf");
  o0.exports = Cl;
});

// ../node_modules/lodash/_listCacheDelete.js
var l0 = p((og, i0) => {
  var zl = Me(), Hl = Array.prototype, Ol = Hl.splice;
  function Ll(e) {
    var t = this.__data__, r = zl(t, e);
    if (r < 0)
      return !1;
    var n = t.length - 1;
    return r == n ? t.pop() : Ol.call(t, r, 1), --this.size, !0;
  }
  a(Ll, "listCacheDelete");
  i0.exports = Ll;
});

// ../node_modules/lodash/_listCacheGet.js
var c0 = p((lg, s0) => {
  var Tl = Me();
  function Bl(e) {
    var t = this.__data__, r = Tl(t, e);
    return r < 0 ? void 0 : t[r][1];
  }
  a(Bl, "listCacheGet");
  s0.exports = Bl;
});

// ../node_modules/lodash/_listCacheHas.js
var u0 = p((cg, f0) => {
  var ql = Me();
  function Vl(e) {
    return ql(this.__data__, e) > -1;
  }
  a(Vl, "listCacheHas");
  f0.exports = Vl;
});

// ../node_modules/lodash/_listCacheSet.js
var h0 = p((ug, d0) => {
  var Dl = Me();
  function Nl(e, t) {
    var r = this.__data__, n = Dl(r, e);
    return n < 0 ? (++this.size, r.push([e, t])) : r[n][1] = t, this;
  }
  a(Nl, "listCacheSet");
  d0.exports = Nl;
});

// ../node_modules/lodash/_ListCache.js
var Ce = p((hg, p0) => {
  var jl = a0(), Fl = l0(), Gl = c0(), Ul = u0(), kl = h0();
  function ne(e) {
    var t = -1, r = e == null ? 0 : e.length;
    for (this.clear(); ++t < r; ) {
      var n = e[t];
      this.set(n[0], n[1]);
    }
  }
  a(ne, "ListCache");
  ne.prototype.clear = jl;
  ne.prototype.delete = Fl;
  ne.prototype.get = Gl;
  ne.prototype.has = Ul;
  ne.prototype.set = kl;
  p0.exports = ne;
});

// ../node_modules/lodash/_stackClear.js
var g0 = p((vg, v0) => {
  var $l = Ce();
  function Kl() {
    this.__data__ = new $l(), this.size = 0;
  }
  a(Kl, "stackClear");
  v0.exports = Kl;
});

// ../node_modules/lodash/_stackDelete.js
var w0 = p((mg, m0) => {
  function Wl(e) {
    var t = this.__data__, r = t.delete(e);
    return this.size = t.size, r;
  }
  a(Wl, "stackDelete");
  m0.exports = Wl;
});

// ../node_modules/lodash/_stackGet.js
var R0 = p((yg, y0) => {
  function Yl(e) {
    return this.__data__.get(e);
  }
  a(Yl, "stackGet");
  y0.exports = Yl;
});

// ../node_modules/lodash/_stackHas.js
var I0 = p((Sg, S0) => {
  function Jl(e) {
    return this.__data__.has(e);
  }
  a(Jl, "stackHas");
  S0.exports = Jl;
});

// ../node_modules/lodash/_freeGlobal.js
var Ht = p((xg, x0) => {
  var Ql = typeof global == "object" && global && global.Object === Object && global;
  x0.exports = Ql;
});

// ../node_modules/lodash/_root.js
var F = p((Ag, A0) => {
  var Xl = Ht(), Zl = typeof self == "object" && self && self.Object === Object && self, es = Xl || Zl || Function("return this")();
  A0.exports = es;
});

// ../node_modules/lodash/_Symbol.js
var oe = p((Eg, E0) => {
  var ts = F(), rs = ts.Symbol;
  E0.exports = rs;
});

// ../node_modules/lodash/_getRawTag.js
var M0 = p((_g, P0) => {
  var _0 = oe(), b0 = Object.prototype, as = b0.hasOwnProperty, ns = b0.toString, ze = _0 ? _0.toStringTag : void 0;
  function os(e) {
    var t = as.call(e, ze), r = e[ze];
    try {
      e[ze] = void 0;
      var n = !0;
    } catch {
    }
    var o = ns.call(e);
    return n && (t ? e[ze] = r : delete e[ze]), o;
  }
  a(os, "getRawTag");
  P0.exports = os;
});

// ../node_modules/lodash/_objectToString.js
var z0 = p((Pg, C0) => {
  var is = Object.prototype, ls = is.toString;
  function ss(e) {
    return ls.call(e);
  }
  a(ss, "objectToString");
  C0.exports = ss;
});

// ../node_modules/lodash/_baseGetTag.js
var Z = p((Cg, L0) => {
  var H0 = oe(), cs = M0(), fs = z0(), us = "[object Null]", ds = "[object Undefined]", O0 = H0 ? H0.toStringTag : void 0;
  function hs(e) {
    return e == null ? e === void 0 ? ds : us : O0 && O0 in Object(e) ? cs(e) : fs(e);
  }
  a(hs, "baseGetTag");
  L0.exports = hs;
});

// ../node_modules/lodash/isObject.js
var $ = p((Hg, T0) => {
  function ps(e) {
    var t = typeof e;
    return e != null && (t == "object" || t == "function");
  }
  a(ps, "isObject");
  T0.exports = ps;
});

// ../node_modules/lodash/isFunction.js
var et = p((Lg, B0) => {
  var vs = Z(), gs = $(), ms = "[object AsyncFunction]", ws = "[object Function]", ys = "[object GeneratorFunction]", Rs = "[object Proxy]";
  function Ss(e) {
    if (!gs(e))
      return !1;
    var t = vs(e);
    return t == ws || t == ys || t == ms || t == Rs;
  }
  a(Ss, "isFunction");
  B0.exports = Ss;
});

// ../node_modules/lodash/_coreJsData.js
var V0 = p((Bg, q0) => {
  var Is = F(), xs = Is["__core-js_shared__"];
  q0.exports = xs;
});

// ../node_modules/lodash/_isMasked.js
var j0 = p((qg, N0) => {
  var Ot = V0(), D0 = function() {
    var e = /[^.]+$/.exec(Ot && Ot.keys && Ot.keys.IE_PROTO || "");
    return e ? "Symbol(src)_1." + e : "";
  }();
  function As(e) {
    return !!D0 && D0 in e;
  }
  a(As, "isMasked");
  N0.exports = As;
});

// ../node_modules/lodash/_toSource.js
var Lt = p((Dg, F0) => {
  var Es = Function.prototype, _s = Es.toString;
  function bs(e) {
    if (e != null) {
      try {
        return _s.call(e);
      } catch {
      }
      try {
        return e + "";
      } catch {
      }
    }
    return "";
  }
  a(bs, "toSource");
  F0.exports = bs;
});

// ../node_modules/lodash/_baseIsNative.js
var U0 = p((jg, G0) => {
  var Ps = et(), Ms = j0(), Cs = $(), zs = Lt(), Hs = /[\\^$.*+?()[\]{}|]/g, Os = /^\[object .+?Constructor\]$/, Ls = Function.prototype, Ts = Object.
  prototype, Bs = Ls.toString, qs = Ts.hasOwnProperty, Vs = RegExp(
    "^" + Bs.call(qs).replace(Hs, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
  );
  function Ds(e) {
    if (!Cs(e) || Ms(e))
      return !1;
    var t = Ps(e) ? Vs : Os;
    return t.test(zs(e));
  }
  a(Ds, "baseIsNative");
  G0.exports = Ds;
});

// ../node_modules/lodash/_getValue.js
var $0 = p((Gg, k0) => {
  function Ns(e, t) {
    return e?.[t];
  }
  a(Ns, "getValue");
  k0.exports = Ns;
});

// ../node_modules/lodash/_getNative.js
var J = p((kg, K0) => {
  var js = U0(), Fs = $0();
  function Gs(e, t) {
    var r = Fs(e, t);
    return js(r) ? r : void 0;
  }
  a(Gs, "getNative");
  K0.exports = Gs;
});

// ../node_modules/lodash/_Map.js
var tt = p((Kg, W0) => {
  var Us = J(), ks = F(), $s = Us(ks, "Map");
  W0.exports = $s;
});

// ../node_modules/lodash/_nativeCreate.js
var He = p((Wg, Y0) => {
  var Ks = J(), Ws = Ks(Object, "create");
  Y0.exports = Ws;
});

// ../node_modules/lodash/_hashClear.js
var X0 = p((Yg, Q0) => {
  var J0 = He();
  function Ys() {
    this.__data__ = J0 ? J0(null) : {}, this.size = 0;
  }
  a(Ys, "hashClear");
  Q0.exports = Ys;
});

// ../node_modules/lodash/_hashDelete.js
var ea = p((Qg, Z0) => {
  function Js(e) {
    var t = this.has(e) && delete this.__data__[e];
    return this.size -= t ? 1 : 0, t;
  }
  a(Js, "hashDelete");
  Z0.exports = Js;
});

// ../node_modules/lodash/_hashGet.js
var ra = p((Zg, ta) => {
  var Qs = He(), Xs = "__lodash_hash_undefined__", Zs = Object.prototype, ec = Zs.hasOwnProperty;
  function tc(e) {
    var t = this.__data__;
    if (Qs) {
      var r = t[e];
      return r === Xs ? void 0 : r;
    }
    return ec.call(t, e) ? t[e] : void 0;
  }
  a(tc, "hashGet");
  ta.exports = tc;
});

// ../node_modules/lodash/_hashHas.js
var na = p((t9, aa) => {
  var rc = He(), ac = Object.prototype, nc = ac.hasOwnProperty;
  function oc(e) {
    var t = this.__data__;
    return rc ? t[e] !== void 0 : nc.call(t, e);
  }
  a(oc, "hashHas");
  aa.exports = oc;
});

// ../node_modules/lodash/_hashSet.js
var ia = p((a9, oa) => {
  var ic = He(), lc = "__lodash_hash_undefined__";
  function sc(e, t) {
    var r = this.__data__;
    return this.size += this.has(e) ? 0 : 1, r[e] = ic && t === void 0 ? lc : t, this;
  }
  a(sc, "hashSet");
  oa.exports = sc;
});

// ../node_modules/lodash/_Hash.js
var sa = p((o9, la) => {
  var cc = X0(), fc = ea(), uc = ra(), dc = na(), hc = ia();
  function ie(e) {
    var t = -1, r = e == null ? 0 : e.length;
    for (this.clear(); ++t < r; ) {
      var n = e[t];
      this.set(n[0], n[1]);
    }
  }
  a(ie, "Hash");
  ie.prototype.clear = cc;
  ie.prototype.delete = fc;
  ie.prototype.get = uc;
  ie.prototype.has = dc;
  ie.prototype.set = hc;
  la.exports = ie;
});

// ../node_modules/lodash/_mapCacheClear.js
var ua = p((l9, fa) => {
  var ca = sa(), pc = Ce(), vc = tt();
  function gc() {
    this.size = 0, this.__data__ = {
      hash: new ca(),
      map: new (vc || pc)(),
      string: new ca()
    };
  }
  a(gc, "mapCacheClear");
  fa.exports = gc;
});

// ../node_modules/lodash/_isKeyable.js
var ha = p((c9, da) => {
  function mc(e) {
    var t = typeof e;
    return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? e !== "__proto__" : e === null;
  }
  a(mc, "isKeyable");
  da.exports = mc;
});

// ../node_modules/lodash/_getMapData.js
var Oe = p((u9, pa) => {
  var wc = ha();
  function yc(e, t) {
    var r = e.__data__;
    return wc(t) ? r[typeof t == "string" ? "string" : "hash"] : r.map;
  }
  a(yc, "getMapData");
  pa.exports = yc;
});

// ../node_modules/lodash/_mapCacheDelete.js
var ga = p((h9, va) => {
  var Rc = Oe();
  function Sc(e) {
    var t = Rc(this, e).delete(e);
    return this.size -= t ? 1 : 0, t;
  }
  a(Sc, "mapCacheDelete");
  va.exports = Sc;
});

// ../node_modules/lodash/_mapCacheGet.js
var wa = p((v9, ma) => {
  var Ic = Oe();
  function xc(e) {
    return Ic(this, e).get(e);
  }
  a(xc, "mapCacheGet");
  ma.exports = xc;
});

// ../node_modules/lodash/_mapCacheHas.js
var Ra = p((m9, ya) => {
  var Ac = Oe();
  function Ec(e) {
    return Ac(this, e).has(e);
  }
  a(Ec, "mapCacheHas");
  ya.exports = Ec;
});

// ../node_modules/lodash/_mapCacheSet.js
var Ia = p((y9, Sa) => {
  var _c = Oe();
  function bc(e, t) {
    var r = _c(this, e), n = r.size;
    return r.set(e, t), this.size += r.size == n ? 0 : 1, this;
  }
  a(bc, "mapCacheSet");
  Sa.exports = bc;
});

// ../node_modules/lodash/_MapCache.js
var rt = p((S9, xa) => {
  var Pc = ua(), Mc = ga(), Cc = wa(), zc = Ra(), Hc = Ia();
  function le(e) {
    var t = -1, r = e == null ? 0 : e.length;
    for (this.clear(); ++t < r; ) {
      var n = e[t];
      this.set(n[0], n[1]);
    }
  }
  a(le, "MapCache");
  le.prototype.clear = Pc;
  le.prototype.delete = Mc;
  le.prototype.get = Cc;
  le.prototype.has = zc;
  le.prototype.set = Hc;
  xa.exports = le;
});

// ../node_modules/lodash/_stackSet.js
var Ea = p((x9, Aa) => {
  var Oc = Ce(), Lc = tt(), Tc = rt(), Bc = 200;
  function qc(e, t) {
    var r = this.__data__;
    if (r instanceof Oc) {
      var n = r.__data__;
      if (!Lc || n.length < Bc - 1)
        return n.push([e, t]), this.size = ++r.size, this;
      r = this.__data__ = new Tc(n);
    }
    return r.set(e, t), this.size = r.size, this;
  }
  a(qc, "stackSet");
  Aa.exports = qc;
});

// ../node_modules/lodash/_Stack.js
var at = p((E9, _a) => {
  var Vc = Ce(), Dc = g0(), Nc = w0(), jc = R0(), Fc = I0(), Gc = Ea();
  function se(e) {
    var t = this.__data__ = new Vc(e);
    this.size = t.size;
  }
  a(se, "Stack");
  se.prototype.clear = Dc;
  se.prototype.delete = Nc;
  se.prototype.get = jc;
  se.prototype.has = Fc;
  se.prototype.set = Gc;
  _a.exports = se;
});

// ../node_modules/lodash/_defineProperty.js
var Tt = p((b9, ba) => {
  var Uc = J(), kc = function() {
    try {
      var e = Uc(Object, "defineProperty");
      return e({}, "", {}), e;
    } catch {
    }
  }();
  ba.exports = kc;
});

// ../node_modules/lodash/_baseAssignValue.js
var ce = p((P9, Ma) => {
  var Pa = Tt();
  function $c(e, t, r) {
    t == "__proto__" && Pa ? Pa(e, t, {
      configurable: !0,
      enumerable: !0,
      value: r,
      writable: !0
    }) : e[t] = r;
  }
  a($c, "baseAssignValue");
  Ma.exports = $c;
});

// ../node_modules/lodash/_assignMergeValue.js
var Bt = p((C9, Ca) => {
  var Kc = ce(), Wc = ae();
  function Yc(e, t, r) {
    (r !== void 0 && !Wc(e[t], r) || r === void 0 && !(t in e)) && Kc(e, t, r);
  }
  a(Yc, "assignMergeValue");
  Ca.exports = Yc;
});

// ../node_modules/lodash/_createBaseFor.js
var Ha = p((H9, za) => {
  function Jc(e) {
    return function(t, r, n) {
      for (var o = -1, i = Object(t), c = n(t), l = c.length; l--; ) {
        var s = c[e ? l : ++o];
        if (r(i[s], s, i) === !1)
          break;
      }
      return t;
    };
  }
  a(Jc, "createBaseFor");
  za.exports = Jc;
});

// ../node_modules/lodash/_baseFor.js
var qt = p((L9, Oa) => {
  var Qc = Ha(), Xc = Qc();
  Oa.exports = Xc;
});

// ../node_modules/lodash/_cloneBuffer.js
var Va = p((Le, fe) => {
  var Zc = F(), qa = typeof Le == "object" && Le && !Le.nodeType && Le, La = qa && typeof fe == "object" && fe && !fe.nodeType && fe, e3 = La &&
  La.exports === qa, Ta = e3 ? Zc.Buffer : void 0, Ba = Ta ? Ta.allocUnsafe : void 0;
  function t3(e, t) {
    if (t)
      return e.slice();
    var r = e.length, n = Ba ? Ba(r) : new e.constructor(r);
    return e.copy(n), n;
  }
  a(t3, "cloneBuffer");
  fe.exports = t3;
});

// ../node_modules/lodash/_Uint8Array.js
var Vt = p((B9, Da) => {
  var r3 = F(), a3 = r3.Uint8Array;
  Da.exports = a3;
});

// ../node_modules/lodash/_cloneArrayBuffer.js
var Fa = p((q9, ja) => {
  var Na = Vt();
  function n3(e) {
    var t = new e.constructor(e.byteLength);
    return new Na(t).set(new Na(e)), t;
  }
  a(n3, "cloneArrayBuffer");
  ja.exports = n3;
});

// ../node_modules/lodash/_cloneTypedArray.js
var Ua = p((D9, Ga) => {
  var o3 = Fa();
  function i3(e, t) {
    var r = t ? o3(e.buffer) : e.buffer;
    return new e.constructor(r, e.byteOffset, e.length);
  }
  a(i3, "cloneTypedArray");
  Ga.exports = i3;
});

// ../node_modules/lodash/_copyArray.js
var $a = p((j9, ka) => {
  function l3(e, t) {
    var r = -1, n = e.length;
    for (t || (t = Array(n)); ++r < n; )
      t[r] = e[r];
    return t;
  }
  a(l3, "copyArray");
  ka.exports = l3;
});

// ../node_modules/lodash/_baseCreate.js
var Ya = p((G9, Wa) => {
  var s3 = $(), Ka = Object.create, c3 = function() {
    function e() {
    }
    return a(e, "object"), function(t) {
      if (!s3(t))
        return {};
      if (Ka)
        return Ka(t);
      e.prototype = t;
      var r = new e();
      return e.prototype = void 0, r;
    };
  }();
  Wa.exports = c3;
});

// ../node_modules/lodash/_overArg.js
var Dt = p((k9, Ja) => {
  function f3(e, t) {
    return function(r) {
      return e(t(r));
    };
  }
  a(f3, "overArg");
  Ja.exports = f3;
});

// ../node_modules/lodash/_getPrototype.js
var Nt = p((K9, Qa) => {
  var u3 = Dt(), d3 = u3(Object.getPrototypeOf, Object);
  Qa.exports = d3;
});

// ../node_modules/lodash/_isPrototype.js
var nt = p((W9, Xa) => {
  var h3 = Object.prototype;
  function p3(e) {
    var t = e && e.constructor, r = typeof t == "function" && t.prototype || h3;
    return e === r;
  }
  a(p3, "isPrototype");
  Xa.exports = p3;
});

// ../node_modules/lodash/_initCloneObject.js
var en = p((J9, Za) => {
  var v3 = Ya(), g3 = Nt(), m3 = nt();
  function w3(e) {
    return typeof e.constructor == "function" && !m3(e) ? v3(g3(e)) : {};
  }
  a(w3, "initCloneObject");
  Za.exports = w3;
});

// ../node_modules/lodash/isObjectLike.js
var Q = p((X9, tn) => {
  function y3(e) {
    return e != null && typeof e == "object";
  }
  a(y3, "isObjectLike");
  tn.exports = y3;
});

// ../node_modules/lodash/_baseIsArguments.js
var an = p((em, rn) => {
  var R3 = Z(), S3 = Q(), I3 = "[object Arguments]";
  function x3(e) {
    return S3(e) && R3(e) == I3;
  }
  a(x3, "baseIsArguments");
  rn.exports = x3;
});

// ../node_modules/lodash/isArguments.js
var Te = p((rm, ln) => {
  var nn = an(), A3 = Q(), on = Object.prototype, E3 = on.hasOwnProperty, _3 = on.propertyIsEnumerable, b3 = nn(/* @__PURE__ */ function() {
    return arguments;
  }()) ? nn : function(e) {
    return A3(e) && E3.call(e, "callee") && !_3.call(e, "callee");
  };
  ln.exports = b3;
});

// ../node_modules/lodash/isArray.js
var D = p((am, sn) => {
  var P3 = Array.isArray;
  sn.exports = P3;
});

// ../node_modules/lodash/isLength.js
var ot = p((nm, cn) => {
  var M3 = 9007199254740991;
  function C3(e) {
    return typeof e == "number" && e > -1 && e % 1 == 0 && e <= M3;
  }
  a(C3, "isLength");
  cn.exports = C3;
});

// ../node_modules/lodash/isArrayLike.js
var ue = p((im, fn) => {
  var z3 = et(), H3 = ot();
  function O3(e) {
    return e != null && H3(e.length) && !z3(e);
  }
  a(O3, "isArrayLike");
  fn.exports = O3;
});

// ../node_modules/lodash/isArrayLikeObject.js
var dn = p((sm, un) => {
  var L3 = ue(), T3 = Q();
  function B3(e) {
    return T3(e) && L3(e);
  }
  a(B3, "isArrayLikeObject");
  un.exports = B3;
});

// ../node_modules/lodash/stubFalse.js
var pn = p((fm, hn) => {
  function q3() {
    return !1;
  }
  a(q3, "stubFalse");
  hn.exports = q3;
});

// ../node_modules/lodash/isBuffer.js
var it = p((Be, de) => {
  var V3 = F(), D3 = pn(), mn = typeof Be == "object" && Be && !Be.nodeType && Be, vn = mn && typeof de == "object" && de && !de.nodeType &&
  de, N3 = vn && vn.exports === mn, gn = N3 ? V3.Buffer : void 0, j3 = gn ? gn.isBuffer : void 0, F3 = j3 || D3;
  de.exports = F3;
});

// ../node_modules/lodash/isPlainObject.js
var Rn = p((dm, yn) => {
  var G3 = Z(), U3 = Nt(), k3 = Q(), $3 = "[object Object]", K3 = Function.prototype, W3 = Object.prototype, wn = K3.toString, Y3 = W3.hasOwnProperty,
  J3 = wn.call(Object);
  function Q3(e) {
    if (!k3(e) || G3(e) != $3)
      return !1;
    var t = U3(e);
    if (t === null)
      return !0;
    var r = Y3.call(t, "constructor") && t.constructor;
    return typeof r == "function" && r instanceof r && wn.call(r) == J3;
  }
  a(Q3, "isPlainObject");
  yn.exports = Q3;
});

// ../node_modules/lodash/_baseIsTypedArray.js
var In = p((pm, Sn) => {
  var X3 = Z(), Z3 = ot(), e4 = Q(), t4 = "[object Arguments]", r4 = "[object Array]", a4 = "[object Boolean]", n4 = "[object Date]", o4 = "\
[object Error]", i4 = "[object Function]", l4 = "[object Map]", s4 = "[object Number]", c4 = "[object Object]", f4 = "[object RegExp]", u4 = "\
[object Set]", d4 = "[object String]", h4 = "[object WeakMap]", p4 = "[object ArrayBuffer]", v4 = "[object DataView]", g4 = "[object Float32\
Array]", m4 = "[object Float64Array]", w4 = "[object Int8Array]", y4 = "[object Int16Array]", R4 = "[object Int32Array]", S4 = "[object Uint\
8Array]", I4 = "[object Uint8ClampedArray]", x4 = "[object Uint16Array]", A4 = "[object Uint32Array]", _ = {};
  _[g4] = _[m4] = _[w4] = _[y4] = _[R4] = _[S4] = _[I4] = _[x4] = _[A4] = !0;
  _[t4] = _[r4] = _[p4] = _[a4] = _[v4] = _[n4] = _[o4] = _[i4] = _[l4] = _[s4] = _[c4] = _[f4] = _[u4] = _[d4] = _[h4] = !1;
  function E4(e) {
    return e4(e) && Z3(e.length) && !!_[X3(e)];
  }
  a(E4, "baseIsTypedArray");
  Sn.exports = E4;
});

// ../node_modules/lodash/_baseUnary.js
var An = p((gm, xn) => {
  function _4(e) {
    return function(t) {
      return e(t);
    };
  }
  a(_4, "baseUnary");
  xn.exports = _4;
});

// ../node_modules/lodash/_nodeUtil.js
var _n = p((qe, he) => {
  var b4 = Ht(), En = typeof qe == "object" && qe && !qe.nodeType && qe, Ve = En && typeof he == "object" && he && !he.nodeType && he, P4 = Ve &&
  Ve.exports === En, jt = P4 && b4.process, M4 = function() {
    try {
      var e = Ve && Ve.require && Ve.require("util").types;
      return e || jt && jt.binding && jt.binding("util");
    } catch {
    }
  }();
  he.exports = M4;
});

// ../node_modules/lodash/isTypedArray.js
var lt = p((wm, Mn) => {
  var C4 = In(), z4 = An(), bn = _n(), Pn = bn && bn.isTypedArray, H4 = Pn ? z4(Pn) : C4;
  Mn.exports = H4;
});

// ../node_modules/lodash/_safeGet.js
var Ft = p((ym, Cn) => {
  function O4(e, t) {
    if (!(t === "constructor" && typeof e[t] == "function") && t != "__proto__")
      return e[t];
  }
  a(O4, "safeGet");
  Cn.exports = O4;
});

// ../node_modules/lodash/_assignValue.js
var Gt = p((Sm, zn) => {
  var L4 = ce(), T4 = ae(), B4 = Object.prototype, q4 = B4.hasOwnProperty;
  function V4(e, t, r) {
    var n = e[t];
    (!(q4.call(e, t) && T4(n, r)) || r === void 0 && !(t in e)) && L4(e, t, r);
  }
  a(V4, "assignValue");
  zn.exports = V4;
});

// ../node_modules/lodash/_copyObject.js
var On = p((xm, Hn) => {
  var D4 = Gt(), N4 = ce();
  function j4(e, t, r, n) {
    var o = !r;
    r || (r = {});
    for (var i = -1, c = t.length; ++i < c; ) {
      var l = t[i], s = n ? n(r[l], e[l], l, r, e) : void 0;
      s === void 0 && (s = e[l]), o ? N4(r, l, s) : D4(r, l, s);
    }
    return r;
  }
  a(j4, "copyObject");
  Hn.exports = j4;
});

// ../node_modules/lodash/_baseTimes.js
var Tn = p((Em, Ln) => {
  function F4(e, t) {
    for (var r = -1, n = Array(e); ++r < e; )
      n[r] = t(r);
    return n;
  }
  a(F4, "baseTimes");
  Ln.exports = F4;
});

// ../node_modules/lodash/_isIndex.js
var De = p((bm, Bn) => {
  var G4 = 9007199254740991, U4 = /^(?:0|[1-9]\d*)$/;
  function k4(e, t) {
    var r = typeof e;
    return t = t ?? G4, !!t && (r == "number" || r != "symbol" && U4.test(e)) && e > -1 && e % 1 == 0 && e < t;
  }
  a(k4, "isIndex");
  Bn.exports = k4;
});

// ../node_modules/lodash/_arrayLikeKeys.js
var Ut = p((Mm, qn) => {
  var $4 = Tn(), K4 = Te(), W4 = D(), Y4 = it(), J4 = De(), Q4 = lt(), X4 = Object.prototype, Z4 = X4.hasOwnProperty;
  function e2(e, t) {
    var r = W4(e), n = !r && K4(e), o = !r && !n && Y4(e), i = !r && !n && !o && Q4(e), c = r || n || o || i, l = c ? $4(e.length, String) :
    [], s = l.length;
    for (var u in e)
      (t || Z4.call(e, u)) && !(c && // Safari 9 has enumerable `arguments.length` in strict mode.
      (u == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
      o && (u == "offset" || u == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
      i && (u == "buffer" || u == "byteLength" || u == "byteOffset") || // Skip index properties.
      J4(u, s))) && l.push(u);
    return l;
  }
  a(e2, "arrayLikeKeys");
  qn.exports = e2;
});

// ../node_modules/lodash/_nativeKeysIn.js
var Dn = p((zm, Vn) => {
  function t2(e) {
    var t = [];
    if (e != null)
      for (var r in Object(e))
        t.push(r);
    return t;
  }
  a(t2, "nativeKeysIn");
  Vn.exports = t2;
});

// ../node_modules/lodash/_baseKeysIn.js
var jn = p((Om, Nn) => {
  var r2 = $(), a2 = nt(), n2 = Dn(), o2 = Object.prototype, i2 = o2.hasOwnProperty;
  function l2(e) {
    if (!r2(e))
      return n2(e);
    var t = a2(e), r = [];
    for (var n in e)
      n == "constructor" && (t || !i2.call(e, n)) || r.push(n);
    return r;
  }
  a(l2, "baseKeysIn");
  Nn.exports = l2;
});

// ../node_modules/lodash/keysIn.js
var kt = p((Tm, Fn) => {
  var s2 = Ut(), c2 = jn(), f2 = ue();
  function u2(e) {
    return f2(e) ? s2(e, !0) : c2(e);
  }
  a(u2, "keysIn");
  Fn.exports = u2;
});

// ../node_modules/lodash/toPlainObject.js
var Un = p((qm, Gn) => {
  var d2 = On(), h2 = kt();
  function p2(e) {
    return d2(e, h2(e));
  }
  a(p2, "toPlainObject");
  Gn.exports = p2;
});

// ../node_modules/lodash/_baseMergeDeep.js
var Jn = p((Dm, Yn) => {
  var kn = Bt(), v2 = Va(), g2 = Ua(), m2 = $a(), w2 = en(), $n = Te(), Kn = D(), y2 = dn(), R2 = it(), S2 = et(), I2 = $(), x2 = Rn(), A2 = lt(),
  Wn = Ft(), E2 = Un();
  function _2(e, t, r, n, o, i, c) {
    var l = Wn(e, r), s = Wn(t, r), u = c.get(s);
    if (u) {
      kn(e, r, u);
      return;
    }
    var d = i ? i(l, s, r + "", e, t, c) : void 0, h = d === void 0;
    if (h) {
      var v = Kn(s), g = !v && R2(s), m = !v && !g && A2(s);
      d = s, v || g || m ? Kn(l) ? d = l : y2(l) ? d = m2(l) : g ? (h = !1, d = v2(s, !0)) : m ? (h = !1, d = g2(s, !0)) : d = [] : x2(s) ||
      $n(s) ? (d = l, $n(l) ? d = E2(l) : (!I2(l) || S2(l)) && (d = w2(s))) : h = !1;
    }
    h && (c.set(s, d), o(d, s, n, i, c), c.delete(s)), kn(e, r, d);
  }
  a(_2, "baseMergeDeep");
  Yn.exports = _2;
});

// ../node_modules/lodash/_baseMerge.js
var Zn = p((jm, Xn) => {
  var b2 = at(), P2 = Bt(), M2 = qt(), C2 = Jn(), z2 = $(), H2 = kt(), O2 = Ft();
  function Qn(e, t, r, n, o) {
    e !== t && M2(t, function(i, c) {
      if (o || (o = new b2()), z2(i))
        C2(e, t, c, r, Qn, n, o);
      else {
        var l = n ? n(O2(e, c), i, c + "", e, t, o) : void 0;
        l === void 0 && (l = i), P2(e, c, l);
      }
    }, H2);
  }
  a(Qn, "baseMerge");
  Xn.exports = Qn;
});

// ../node_modules/lodash/identity.js
var st = p((Gm, e1) => {
  function L2(e) {
    return e;
  }
  a(L2, "identity");
  e1.exports = L2;
});

// ../node_modules/lodash/_apply.js
var r1 = p((km, t1) => {
  function T2(e, t, r) {
    switch (r.length) {
      case 0:
        return e.call(t);
      case 1:
        return e.call(t, r[0]);
      case 2:
        return e.call(t, r[0], r[1]);
      case 3:
        return e.call(t, r[0], r[1], r[2]);
    }
    return e.apply(t, r);
  }
  a(T2, "apply");
  t1.exports = T2;
});

// ../node_modules/lodash/_overRest.js
var $t = p((Km, n1) => {
  var B2 = r1(), a1 = Math.max;
  function q2(e, t, r) {
    return t = a1(t === void 0 ? e.length - 1 : t, 0), function() {
      for (var n = arguments, o = -1, i = a1(n.length - t, 0), c = Array(i); ++o < i; )
        c[o] = n[t + o];
      o = -1;
      for (var l = Array(t + 1); ++o < t; )
        l[o] = n[o];
      return l[t] = r(c), B2(e, this, l);
    };
  }
  a(q2, "overRest");
  n1.exports = q2;
});

// ../node_modules/lodash/constant.js
var i1 = p((Ym, o1) => {
  function V2(e) {
    return function() {
      return e;
    };
  }
  a(V2, "constant");
  o1.exports = V2;
});

// ../node_modules/lodash/_baseSetToString.js
var c1 = p((Qm, s1) => {
  var D2 = i1(), l1 = Tt(), N2 = st(), j2 = l1 ? function(e, t) {
    return l1(e, "toString", {
      configurable: !0,
      enumerable: !1,
      value: D2(t),
      writable: !0
    });
  } : N2;
  s1.exports = j2;
});

// ../node_modules/lodash/_shortOut.js
var u1 = p((Xm, f1) => {
  var F2 = 800, G2 = 16, U2 = Date.now;
  function k2(e) {
    var t = 0, r = 0;
    return function() {
      var n = U2(), o = G2 - (n - r);
      if (r = n, o > 0) {
        if (++t >= F2)
          return arguments[0];
      } else
        t = 0;
      return e.apply(void 0, arguments);
    };
  }
  a(k2, "shortOut");
  f1.exports = k2;
});

// ../node_modules/lodash/_setToString.js
var Kt = p((ew, d1) => {
  var $2 = c1(), K2 = u1(), W2 = K2($2);
  d1.exports = W2;
});

// ../node_modules/lodash/_baseRest.js
var p1 = p((tw, h1) => {
  var Y2 = st(), J2 = $t(), Q2 = Kt();
  function X2(e, t) {
    return Q2(J2(e, t, Y2), e + "");
  }
  a(X2, "baseRest");
  h1.exports = X2;
});

// ../node_modules/lodash/_isIterateeCall.js
var g1 = p((aw, v1) => {
  var Z2 = ae(), ef = ue(), tf = De(), rf = $();
  function af(e, t, r) {
    if (!rf(r))
      return !1;
    var n = typeof t;
    return (n == "number" ? ef(r) && tf(t, r.length) : n == "string" && t in r) ? Z2(r[t], e) : !1;
  }
  a(af, "isIterateeCall");
  v1.exports = af;
});

// ../node_modules/lodash/_createAssigner.js
var w1 = p((ow, m1) => {
  var nf = p1(), of = g1();
  function lf(e) {
    return nf(function(t, r) {
      var n = -1, o = r.length, i = o > 1 ? r[o - 1] : void 0, c = o > 2 ? r[2] : void 0;
      for (i = e.length > 3 && typeof i == "function" ? (o--, i) : void 0, c && of(r[0], r[1], c) && (i = o < 3 ? void 0 : i, o = 1), t = Object(
      t); ++n < o; ) {
        var l = r[n];
        l && e(t, l, n, i);
      }
      return t;
    });
  }
  a(lf, "createAssigner");
  m1.exports = lf;
});

// ../node_modules/lodash/mergeWith.js
var Wt = p((lw, y1) => {
  var sf = Zn(), cf = w1(), ff = cf(function(e, t, r, n) {
    sf(e, t, r, n);
  });
  y1.exports = ff;
});

// ../node_modules/lodash/_setCacheAdd.js
var I1 = p((uw, S1) => {
  var df = "__lodash_hash_undefined__";
  function hf(e) {
    return this.__data__.set(e, df), this;
  }
  a(hf, "setCacheAdd");
  S1.exports = hf;
});

// ../node_modules/lodash/_setCacheHas.js
var A1 = p((hw, x1) => {
  function pf(e) {
    return this.__data__.has(e);
  }
  a(pf, "setCacheHas");
  x1.exports = pf;
});

// ../node_modules/lodash/_SetCache.js
var _1 = p((vw, E1) => {
  var vf = rt(), gf = I1(), mf = A1();
  function ct(e) {
    var t = -1, r = e == null ? 0 : e.length;
    for (this.__data__ = new vf(); ++t < r; )
      this.add(e[t]);
  }
  a(ct, "SetCache");
  ct.prototype.add = ct.prototype.push = gf;
  ct.prototype.has = mf;
  E1.exports = ct;
});

// ../node_modules/lodash/_arraySome.js
var P1 = p((mw, b1) => {
  function wf(e, t) {
    for (var r = -1, n = e == null ? 0 : e.length; ++r < n; )
      if (t(e[r], r, e))
        return !0;
    return !1;
  }
  a(wf, "arraySome");
  b1.exports = wf;
});

// ../node_modules/lodash/_cacheHas.js
var C1 = p((yw, M1) => {
  function yf(e, t) {
    return e.has(t);
  }
  a(yf, "cacheHas");
  M1.exports = yf;
});

// ../node_modules/lodash/_equalArrays.js
var Yt = p((Sw, z1) => {
  var Rf = _1(), Sf = P1(), If = C1(), xf = 1, Af = 2;
  function Ef(e, t, r, n, o, i) {
    var c = r & xf, l = e.length, s = t.length;
    if (l != s && !(c && s > l))
      return !1;
    var u = i.get(e), d = i.get(t);
    if (u && d)
      return u == t && d == e;
    var h = -1, v = !0, g = r & Af ? new Rf() : void 0;
    for (i.set(e, t), i.set(t, e); ++h < l; ) {
      var m = e[h], w = t[h];
      if (n)
        var y = c ? n(w, m, h, t, e, i) : n(m, w, h, e, t, i);
      if (y !== void 0) {
        if (y)
          continue;
        v = !1;
        break;
      }
      if (g) {
        if (!Sf(t, function(R, S) {
          if (!If(g, S) && (m === R || o(m, R, r, n, i)))
            return g.push(S);
        })) {
          v = !1;
          break;
        }
      } else if (!(m === w || o(m, w, r, n, i))) {
        v = !1;
        break;
      }
    }
    return i.delete(e), i.delete(t), v;
  }
  a(Ef, "equalArrays");
  z1.exports = Ef;
});

// ../node_modules/lodash/_mapToArray.js
var O1 = p((xw, H1) => {
  function _f(e) {
    var t = -1, r = Array(e.size);
    return e.forEach(function(n, o) {
      r[++t] = [o, n];
    }), r;
  }
  a(_f, "mapToArray");
  H1.exports = _f;
});

// ../node_modules/lodash/_setToArray.js
var T1 = p((Ew, L1) => {
  function bf(e) {
    var t = -1, r = Array(e.size);
    return e.forEach(function(n) {
      r[++t] = n;
    }), r;
  }
  a(bf, "setToArray");
  L1.exports = bf;
});

// ../node_modules/lodash/_equalByTag.js
var N1 = p((bw, D1) => {
  var B1 = oe(), q1 = Vt(), Pf = ae(), Mf = Yt(), Cf = O1(), zf = T1(), Hf = 1, Of = 2, Lf = "[object Boolean]", Tf = "[object Date]", Bf = "\
[object Error]", qf = "[object Map]", Vf = "[object Number]", Df = "[object RegExp]", Nf = "[object Set]", jf = "[object String]", Ff = "[ob\
ject Symbol]", Gf = "[object ArrayBuffer]", Uf = "[object DataView]", V1 = B1 ? B1.prototype : void 0, Jt = V1 ? V1.valueOf : void 0;
  function kf(e, t, r, n, o, i, c) {
    switch (r) {
      case Uf:
        if (e.byteLength != t.byteLength || e.byteOffset != t.byteOffset)
          return !1;
        e = e.buffer, t = t.buffer;
      case Gf:
        return !(e.byteLength != t.byteLength || !i(new q1(e), new q1(t)));
      case Lf:
      case Tf:
      case Vf:
        return Pf(+e, +t);
      case Bf:
        return e.name == t.name && e.message == t.message;
      case Df:
      case jf:
        return e == t + "";
      case qf:
        var l = Cf;
      case Nf:
        var s = n & Hf;
        if (l || (l = zf), e.size != t.size && !s)
          return !1;
        var u = c.get(e);
        if (u)
          return u == t;
        n |= Of, c.set(e, t);
        var d = Mf(l(e), l(t), n, o, i, c);
        return c.delete(e), d;
      case Ff:
        if (Jt)
          return Jt.call(e) == Jt.call(t);
    }
    return !1;
  }
  a(kf, "equalByTag");
  D1.exports = kf;
});

// ../node_modules/lodash/_arrayPush.js
var Qt = p((Mw, j1) => {
  function $f(e, t) {
    for (var r = -1, n = t.length, o = e.length; ++r < n; )
      e[o + r] = t[r];
    return e;
  }
  a($f, "arrayPush");
  j1.exports = $f;
});

// ../node_modules/lodash/_baseGetAllKeys.js
var G1 = p((zw, F1) => {
  var Kf = Qt(), Wf = D();
  function Yf(e, t, r) {
    var n = t(e);
    return Wf(e) ? n : Kf(n, r(e));
  }
  a(Yf, "baseGetAllKeys");
  F1.exports = Yf;
});

// ../node_modules/lodash/_arrayFilter.js
var k1 = p((Ow, U1) => {
  function Jf(e, t) {
    for (var r = -1, n = e == null ? 0 : e.length, o = 0, i = []; ++r < n; ) {
      var c = e[r];
      t(c, r, e) && (i[o++] = c);
    }
    return i;
  }
  a(Jf, "arrayFilter");
  U1.exports = Jf;
});

// ../node_modules/lodash/stubArray.js
var K1 = p((Tw, $1) => {
  function Qf() {
    return [];
  }
  a(Qf, "stubArray");
  $1.exports = Qf;
});

// ../node_modules/lodash/_getSymbols.js
var J1 = p((qw, Y1) => {
  var Xf = k1(), Zf = K1(), eu = Object.prototype, tu = eu.propertyIsEnumerable, W1 = Object.getOwnPropertySymbols, ru = W1 ? function(e) {
    return e == null ? [] : (e = Object(e), Xf(W1(e), function(t) {
      return tu.call(e, t);
    }));
  } : Zf;
  Y1.exports = ru;
});

// ../node_modules/lodash/_nativeKeys.js
var X1 = p((Vw, Q1) => {
  var au = Dt(), nu = au(Object.keys, Object);
  Q1.exports = nu;
});

// ../node_modules/lodash/_baseKeys.js
var eo = p((Dw, Z1) => {
  var ou = nt(), iu = X1(), lu = Object.prototype, su = lu.hasOwnProperty;
  function cu(e) {
    if (!ou(e))
      return iu(e);
    var t = [];
    for (var r in Object(e))
      su.call(e, r) && r != "constructor" && t.push(r);
    return t;
  }
  a(cu, "baseKeys");
  Z1.exports = cu;
});

// ../node_modules/lodash/keys.js
var ft = p((jw, to) => {
  var fu = Ut(), uu = eo(), du = ue();
  function hu(e) {
    return du(e) ? fu(e) : uu(e);
  }
  a(hu, "keys");
  to.exports = hu;
});

// ../node_modules/lodash/_getAllKeys.js
var ao = p((Gw, ro) => {
  var pu = G1(), vu = J1(), gu = ft();
  function mu(e) {
    return pu(e, gu, vu);
  }
  a(mu, "getAllKeys");
  ro.exports = mu;
});

// ../node_modules/lodash/_equalObjects.js
var io = p((kw, oo) => {
  var no = ao(), wu = 1, yu = Object.prototype, Ru = yu.hasOwnProperty;
  function Su(e, t, r, n, o, i) {
    var c = r & wu, l = no(e), s = l.length, u = no(t), d = u.length;
    if (s != d && !c)
      return !1;
    for (var h = s; h--; ) {
      var v = l[h];
      if (!(c ? v in t : Ru.call(t, v)))
        return !1;
    }
    var g = i.get(e), m = i.get(t);
    if (g && m)
      return g == t && m == e;
    var w = !0;
    i.set(e, t), i.set(t, e);
    for (var y = c; ++h < s; ) {
      v = l[h];
      var R = e[v], S = t[v];
      if (n)
        var A = c ? n(S, R, v, t, e, i) : n(R, S, v, e, t, i);
      if (!(A === void 0 ? R === S || o(R, S, r, n, i) : A)) {
        w = !1;
        break;
      }
      y || (y = v == "constructor");
    }
    if (w && !y) {
      var x = e.constructor, I = t.constructor;
      x != I && "constructor" in e && "constructor" in t && !(typeof x == "function" && x instanceof x && typeof I == "function" && I instanceof
      I) && (w = !1);
    }
    return i.delete(e), i.delete(t), w;
  }
  a(Su, "equalObjects");
  oo.exports = Su;
});

// ../node_modules/lodash/_DataView.js
var so = p((Kw, lo) => {
  var Iu = J(), xu = F(), Au = Iu(xu, "DataView");
  lo.exports = Au;
});

// ../node_modules/lodash/_Promise.js
var fo = p((Ww, co) => {
  var Eu = J(), _u = F(), bu = Eu(_u, "Promise");
  co.exports = bu;
});

// ../node_modules/lodash/_Set.js
var ho = p((Yw, uo) => {
  var Pu = J(), Mu = F(), Cu = Pu(Mu, "Set");
  uo.exports = Cu;
});

// ../node_modules/lodash/_WeakMap.js
var vo = p((Jw, po) => {
  var zu = J(), Hu = F(), Ou = zu(Hu, "WeakMap");
  po.exports = Ou;
});

// ../node_modules/lodash/_getTag.js
var xo = p((Qw, Io) => {
  var Xt = so(), Zt = tt(), er = fo(), tr = ho(), rr = vo(), So = Z(), pe = Lt(), go = "[object Map]", Lu = "[object Object]", mo = "[object\
 Promise]", wo = "[object Set]", yo = "[object WeakMap]", Ro = "[object DataView]", Tu = pe(Xt), Bu = pe(Zt), qu = pe(er), Vu = pe(tr), Du = pe(
  rr), ee = So;
  (Xt && ee(new Xt(new ArrayBuffer(1))) != Ro || Zt && ee(new Zt()) != go || er && ee(er.resolve()) != mo || tr && ee(new tr()) != wo || rr &&
  ee(new rr()) != yo) && (ee = /* @__PURE__ */ a(function(e) {
    var t = So(e), r = t == Lu ? e.constructor : void 0, n = r ? pe(r) : "";
    if (n)
      switch (n) {
        case Tu:
          return Ro;
        case Bu:
          return go;
        case qu:
          return mo;
        case Vu:
          return wo;
        case Du:
          return yo;
      }
    return t;
  }, "getTag"));
  Io.exports = ee;
});

// ../node_modules/lodash/_baseIsEqualDeep.js
var zo = p((Zw, Co) => {
  var ar = at(), Nu = Yt(), ju = N1(), Fu = io(), Ao = xo(), Eo = D(), _o = it(), Gu = lt(), Uu = 1, bo = "[object Arguments]", Po = "[objec\
t Array]", ut = "[object Object]", ku = Object.prototype, Mo = ku.hasOwnProperty;
  function $u(e, t, r, n, o, i) {
    var c = Eo(e), l = Eo(t), s = c ? Po : Ao(e), u = l ? Po : Ao(t);
    s = s == bo ? ut : s, u = u == bo ? ut : u;
    var d = s == ut, h = u == ut, v = s == u;
    if (v && _o(e)) {
      if (!_o(t))
        return !1;
      c = !0, d = !1;
    }
    if (v && !d)
      return i || (i = new ar()), c || Gu(e) ? Nu(e, t, r, n, o, i) : ju(e, t, s, r, n, o, i);
    if (!(r & Uu)) {
      var g = d && Mo.call(e, "__wrapped__"), m = h && Mo.call(t, "__wrapped__");
      if (g || m) {
        var w = g ? e.value() : e, y = m ? t.value() : t;
        return i || (i = new ar()), o(w, y, r, n, i);
      }
    }
    return v ? (i || (i = new ar()), Fu(e, t, r, n, o, i)) : !1;
  }
  a($u, "baseIsEqualDeep");
  Co.exports = $u;
});

// ../node_modules/lodash/_baseIsEqual.js
var dt = p((ty, Lo) => {
  var Ku = zo(), Ho = Q();
  function Oo(e, t, r, n, o) {
    return e === t ? !0 : e == null || t == null || !Ho(e) && !Ho(t) ? e !== e && t !== t : Ku(e, t, r, n, Oo, o);
  }
  a(Oo, "baseIsEqual");
  Lo.exports = Oo;
});

// ../node_modules/lodash/isEqual.js
var Bo = p((ay, To) => {
  var Wu = dt();
  function Yu(e, t) {
    return Wu(e, t);
  }
  a(Yu, "isEqual");
  To.exports = Yu;
});

// ../node_modules/lodash/_arrayAggregator.js
var ko = p((My, Uo) => {
  function n7(e, t, r, n) {
    for (var o = -1, i = e == null ? 0 : e.length; ++o < i; ) {
      var c = e[o];
      t(n, c, r(c), e);
    }
    return n;
  }
  a(n7, "arrayAggregator");
  Uo.exports = n7;
});

// ../node_modules/lodash/_baseForOwn.js
var ur = p((zy, $o) => {
  var o7 = qt(), i7 = ft();
  function l7(e, t) {
    return e && o7(e, t, i7);
  }
  a(l7, "baseForOwn");
  $o.exports = l7;
});

// ../node_modules/lodash/_createBaseEach.js
var Wo = p((Oy, Ko) => {
  var s7 = ue();
  function c7(e, t) {
    return function(r, n) {
      if (r == null)
        return r;
      if (!s7(r))
        return e(r, n);
      for (var o = r.length, i = t ? o : -1, c = Object(r); (t ? i-- : ++i < o) && n(c[i], i, c) !== !1; )
        ;
      return r;
    };
  }
  a(c7, "createBaseEach");
  Ko.exports = c7;
});

// ../node_modules/lodash/_baseEach.js
var Jo = p((Ty, Yo) => {
  var f7 = ur(), u7 = Wo(), d7 = u7(f7);
  Yo.exports = d7;
});

// ../node_modules/lodash/_baseAggregator.js
var Xo = p((By, Qo) => {
  var h7 = Jo();
  function p7(e, t, r, n) {
    return h7(e, function(o, i, c) {
      t(n, o, r(o), c);
    }), n;
  }
  a(p7, "baseAggregator");
  Qo.exports = p7;
});

// ../node_modules/lodash/_baseIsMatch.js
var e5 = p((Vy, Zo) => {
  var v7 = at(), g7 = dt(), m7 = 1, w7 = 2;
  function y7(e, t, r, n) {
    var o = r.length, i = o, c = !n;
    if (e == null)
      return !i;
    for (e = Object(e); o--; ) {
      var l = r[o];
      if (c && l[2] ? l[1] !== e[l[0]] : !(l[0] in e))
        return !1;
    }
    for (; ++o < i; ) {
      l = r[o];
      var s = l[0], u = e[s], d = l[1];
      if (c && l[2]) {
        if (u === void 0 && !(s in e))
          return !1;
      } else {
        var h = new v7();
        if (n)
          var v = n(u, d, s, e, t, h);
        if (!(v === void 0 ? g7(d, u, m7 | w7, n, h) : v))
          return !1;
      }
    }
    return !0;
  }
  a(y7, "baseIsMatch");
  Zo.exports = y7;
});

// ../node_modules/lodash/_isStrictComparable.js
var dr = p((Ny, t5) => {
  var R7 = $();
  function S7(e) {
    return e === e && !R7(e);
  }
  a(S7, "isStrictComparable");
  t5.exports = S7;
});

// ../node_modules/lodash/_getMatchData.js
var a5 = p((Fy, r5) => {
  var I7 = dr(), x7 = ft();
  function A7(e) {
    for (var t = x7(e), r = t.length; r--; ) {
      var n = t[r], o = e[n];
      t[r] = [n, o, I7(o)];
    }
    return t;
  }
  a(A7, "getMatchData");
  r5.exports = A7;
});

// ../node_modules/lodash/_matchesStrictComparable.js
var hr = p((Uy, n5) => {
  function E7(e, t) {
    return function(r) {
      return r == null ? !1 : r[e] === t && (t !== void 0 || e in Object(r));
    };
  }
  a(E7, "matchesStrictComparable");
  n5.exports = E7;
});

// ../node_modules/lodash/_baseMatches.js
var i5 = p(($y, o5) => {
  var _7 = e5(), b7 = a5(), P7 = hr();
  function M7(e) {
    var t = b7(e);
    return t.length == 1 && t[0][2] ? P7(t[0][0], t[0][1]) : function(r) {
      return r === e || _7(r, e, t);
    };
  }
  a(M7, "baseMatches");
  o5.exports = M7;
});

// ../node_modules/lodash/isSymbol.js
var pt = p((Wy, l5) => {
  var C7 = Z(), z7 = Q(), H7 = "[object Symbol]";
  function O7(e) {
    return typeof e == "symbol" || z7(e) && C7(e) == H7;
  }
  a(O7, "isSymbol");
  l5.exports = O7;
});

// ../node_modules/lodash/_isKey.js
var vt = p((Jy, s5) => {
  var L7 = D(), T7 = pt(), B7 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, q7 = /^\w*$/;
  function V7(e, t) {
    if (L7(e))
      return !1;
    var r = typeof e;
    return r == "number" || r == "symbol" || r == "boolean" || e == null || T7(e) ? !0 : q7.test(e) || !B7.test(e) || t != null && e in Object(
    t);
  }
  a(V7, "isKey");
  s5.exports = V7;
});

// ../node_modules/lodash/memoize.js
var u5 = p((Xy, f5) => {
  var c5 = rt(), D7 = "Expected a function";
  function pr(e, t) {
    if (typeof e != "function" || t != null && typeof t != "function")
      throw new TypeError(D7);
    var r = /* @__PURE__ */ a(function() {
      var n = arguments, o = t ? t.apply(this, n) : n[0], i = r.cache;
      if (i.has(o))
        return i.get(o);
      var c = e.apply(this, n);
      return r.cache = i.set(o, c) || i, c;
    }, "memoized");
    return r.cache = new (pr.Cache || c5)(), r;
  }
  a(pr, "memoize");
  pr.Cache = c5;
  f5.exports = pr;
});

// ../node_modules/lodash/_memoizeCapped.js
var h5 = p((eR, d5) => {
  var N7 = u5(), j7 = 500;
  function F7(e) {
    var t = N7(e, function(n) {
      return r.size === j7 && r.clear(), n;
    }), r = t.cache;
    return t;
  }
  a(F7, "memoizeCapped");
  d5.exports = F7;
});

// ../node_modules/lodash/_stringToPath.js
var v5 = p((rR, p5) => {
  var G7 = h5(), U7 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, k7 = /\\(\\)?/g, $7 = G7(
  function(e) {
    var t = [];
    return e.charCodeAt(0) === 46 && t.push(""), e.replace(U7, function(r, n, o, i) {
      t.push(o ? i.replace(k7, "$1") : n || r);
    }), t;
  });
  p5.exports = $7;
});

// ../node_modules/lodash/_arrayMap.js
var m5 = p((aR, g5) => {
  function K7(e, t) {
    for (var r = -1, n = e == null ? 0 : e.length, o = Array(n); ++r < n; )
      o[r] = t(e[r], r, e);
    return o;
  }
  a(K7, "arrayMap");
  g5.exports = K7;
});

// ../node_modules/lodash/_baseToString.js
var x5 = p((oR, I5) => {
  var w5 = oe(), W7 = m5(), Y7 = D(), J7 = pt(), Q7 = 1 / 0, y5 = w5 ? w5.prototype : void 0, R5 = y5 ? y5.toString : void 0;
  function S5(e) {
    if (typeof e == "string")
      return e;
    if (Y7(e))
      return W7(e, S5) + "";
    if (J7(e))
      return R5 ? R5.call(e) : "";
    var t = e + "";
    return t == "0" && 1 / e == -Q7 ? "-0" : t;
  }
  a(S5, "baseToString");
  I5.exports = S5;
});

// ../node_modules/lodash/toString.js
var E5 = p((lR, A5) => {
  var X7 = x5();
  function Z7(e) {
    return e == null ? "" : X7(e);
  }
  a(Z7, "toString");
  A5.exports = Z7;
});

// ../node_modules/lodash/_castPath.js
var je = p((cR, _5) => {
  var ed = D(), td = vt(), rd = v5(), ad = E5();
  function nd(e, t) {
    return ed(e) ? e : td(e, t) ? [e] : rd(ad(e));
  }
  a(nd, "castPath");
  _5.exports = nd;
});

// ../node_modules/lodash/_toKey.js
var ve = p((uR, b5) => {
  var od = pt(), id = 1 / 0;
  function ld(e) {
    if (typeof e == "string" || od(e))
      return e;
    var t = e + "";
    return t == "0" && 1 / e == -id ? "-0" : t;
  }
  a(ld, "toKey");
  b5.exports = ld;
});

// ../node_modules/lodash/_baseGet.js
var gt = p((hR, P5) => {
  var sd = je(), cd = ve();
  function fd(e, t) {
    t = sd(t, e);
    for (var r = 0, n = t.length; e != null && r < n; )
      e = e[cd(t[r++])];
    return r && r == n ? e : void 0;
  }
  a(fd, "baseGet");
  P5.exports = fd;
});

// ../node_modules/lodash/get.js
var C5 = p((vR, M5) => {
  var ud = gt();
  function dd(e, t, r) {
    var n = e == null ? void 0 : ud(e, t);
    return n === void 0 ? r : n;
  }
  a(dd, "get");
  M5.exports = dd;
});

// ../node_modules/lodash/_baseHasIn.js
var H5 = p((mR, z5) => {
  function hd(e, t) {
    return e != null && t in Object(e);
  }
  a(hd, "baseHasIn");
  z5.exports = hd;
});

// ../node_modules/lodash/_hasPath.js
var L5 = p((yR, O5) => {
  var pd = je(), vd = Te(), gd = D(), md = De(), wd = ot(), yd = ve();
  function Rd(e, t, r) {
    t = pd(t, e);
    for (var n = -1, o = t.length, i = !1; ++n < o; ) {
      var c = yd(t[n]);
      if (!(i = e != null && r(e, c)))
        break;
      e = e[c];
    }
    return i || ++n != o ? i : (o = e == null ? 0 : e.length, !!o && wd(o) && md(c, o) && (gd(e) || vd(e)));
  }
  a(Rd, "hasPath");
  O5.exports = Rd;
});

// ../node_modules/lodash/hasIn.js
var vr = p((SR, T5) => {
  var Sd = H5(), Id = L5();
  function xd(e, t) {
    return e != null && Id(e, t, Sd);
  }
  a(xd, "hasIn");
  T5.exports = xd;
});

// ../node_modules/lodash/_baseMatchesProperty.js
var q5 = p((xR, B5) => {
  var Ad = dt(), Ed = C5(), _d = vr(), bd = vt(), Pd = dr(), Md = hr(), Cd = ve(), zd = 1, Hd = 2;
  function Od(e, t) {
    return bd(e) && Pd(t) ? Md(Cd(e), t) : function(r) {
      var n = Ed(r, e);
      return n === void 0 && n === t ? _d(r, e) : Ad(t, n, zd | Hd);
    };
  }
  a(Od, "baseMatchesProperty");
  B5.exports = Od;
});

// ../node_modules/lodash/_baseProperty.js
var D5 = p((ER, V5) => {
  function Ld(e) {
    return function(t) {
      return t?.[e];
    };
  }
  a(Ld, "baseProperty");
  V5.exports = Ld;
});

// ../node_modules/lodash/_basePropertyDeep.js
var j5 = p((bR, N5) => {
  var Td = gt();
  function Bd(e) {
    return function(t) {
      return Td(t, e);
    };
  }
  a(Bd, "basePropertyDeep");
  N5.exports = Bd;
});

// ../node_modules/lodash/property.js
var G5 = p((MR, F5) => {
  var qd = D5(), Vd = j5(), Dd = vt(), Nd = ve();
  function jd(e) {
    return Dd(e) ? qd(Nd(e)) : Vd(e);
  }
  a(jd, "property");
  F5.exports = jd;
});

// ../node_modules/lodash/_baseIteratee.js
var gr = p((zR, U5) => {
  var Fd = i5(), Gd = q5(), Ud = st(), kd = D(), $d = G5();
  function Kd(e) {
    return typeof e == "function" ? e : e == null ? Ud : typeof e == "object" ? kd(e) ? Gd(e[0], e[1]) : Fd(e) : $d(e);
  }
  a(Kd, "baseIteratee");
  U5.exports = Kd;
});

// ../node_modules/lodash/_createAggregator.js
var mr = p((OR, k5) => {
  var Wd = ko(), Yd = Xo(), Jd = gr(), Qd = D();
  function Xd(e, t) {
    return function(r, n) {
      var o = Qd(r) ? Wd : Yd, i = t ? t() : {};
      return o(r, e, Jd(n, 2), i);
    };
  }
  a(Xd, "createAggregator");
  k5.exports = Xd;
});

// ../node_modules/lodash/countBy.js
var K5 = p((TR, $5) => {
  var Zd = ce(), eh = mr(), th = Object.prototype, rh = th.hasOwnProperty, ah = eh(function(e, t, r) {
    rh.call(e, r) ? ++e[r] : Zd(e, r, 1);
  });
  $5.exports = ah;
});

// ../node_modules/lodash/mapValues.js
var Y5 = p((BR, W5) => {
  var nh = ce(), oh = ur(), ih = gr();
  function lh(e, t) {
    var r = {};
    return t = ih(t, 3), oh(e, function(n, o, i) {
      nh(r, o, t(n, o, i));
    }), r;
  }
  a(lh, "mapValues");
  W5.exports = lh;
});

// ../node_modules/memoizerific/memoizerific.js
var mt = p((J5, wr) => {
  (function(e) {
    if (typeof J5 == "object" && typeof wr < "u")
      wr.exports = e();
    else if (typeof define == "function" && define.amd)
      define([], e);
    else {
      var t;
      typeof window < "u" ? t = window : typeof global < "u" ? t = global : typeof self < "u" ? t = self : t = this, t.memoizerific = e();
    }
  })(function() {
    var e, t, r;
    return (/* @__PURE__ */ a(function n(o, i, c) {
      function l(d, h) {
        if (!i[d]) {
          if (!o[d]) {
            var v = typeof Pe == "function" && Pe;
            if (!h && v) return v(d, !0);
            if (s) return s(d, !0);
            var g = new Error("Cannot find module '" + d + "'");
            throw g.code = "MODULE_NOT_FOUND", g;
          }
          var m = i[d] = { exports: {} };
          o[d][0].call(m.exports, function(w) {
            var y = o[d][1][w];
            return l(y || w);
          }, m, m.exports, n, o, i, c);
        }
        return i[d].exports;
      }
      a(l, "s");
      for (var s = typeof Pe == "function" && Pe, u = 0; u < c.length; u++) l(c[u]);
      return l;
    }, "e"))({ 1: [function(n, o, i) {
      o.exports = function(c) {
        if (typeof Map != "function" || c) {
          var l = n("./similar");
          return new l();
        } else
          return /* @__PURE__ */ new Map();
      };
    }, { "./similar": 2 }], 2: [function(n, o, i) {
      function c() {
        return this.list = [], this.lastItem = void 0, this.size = 0, this;
      }
      a(c, "Similar"), c.prototype.get = function(l) {
        var s;
        if (this.lastItem && this.isEqual(this.lastItem.key, l))
          return this.lastItem.val;
        if (s = this.indexOf(l), s >= 0)
          return this.lastItem = this.list[s], this.list[s].val;
      }, c.prototype.set = function(l, s) {
        var u;
        return this.lastItem && this.isEqual(this.lastItem.key, l) ? (this.lastItem.val = s, this) : (u = this.indexOf(l), u >= 0 ? (this.lastItem =
        this.list[u], this.list[u].val = s, this) : (this.lastItem = { key: l, val: s }, this.list.push(this.lastItem), this.size++, this));
      }, c.prototype.delete = function(l) {
        var s;
        if (this.lastItem && this.isEqual(this.lastItem.key, l) && (this.lastItem = void 0), s = this.indexOf(l), s >= 0)
          return this.size--, this.list.splice(s, 1)[0];
      }, c.prototype.has = function(l) {
        var s;
        return this.lastItem && this.isEqual(this.lastItem.key, l) ? !0 : (s = this.indexOf(l), s >= 0 ? (this.lastItem = this.list[s], !0) :
        !1);
      }, c.prototype.forEach = function(l, s) {
        var u;
        for (u = 0; u < this.size; u++)
          l.call(s || this, this.list[u].val, this.list[u].key, this);
      }, c.prototype.indexOf = function(l) {
        var s;
        for (s = 0; s < this.size; s++)
          if (this.isEqual(this.list[s].key, l))
            return s;
        return -1;
      }, c.prototype.isEqual = function(l, s) {
        return l === s || l !== l && s !== s;
      }, o.exports = c;
    }, {}], 3: [function(n, o, i) {
      var c = n("map-or-similar");
      o.exports = function(d) {
        var h = new c(!1), v = [];
        return function(g) {
          var m = /* @__PURE__ */ a(function() {
            var w = h, y, R, S = arguments.length - 1, A = Array(S + 1), x = !0, I;
            if ((m.numArgs || m.numArgs === 0) && m.numArgs !== S + 1)
              throw new Error("Memoizerific functions should always be called with the same number of arguments");
            for (I = 0; I < S; I++) {
              if (A[I] = {
                cacheItem: w,
                arg: arguments[I]
              }, w.has(arguments[I])) {
                w = w.get(arguments[I]);
                continue;
              }
              x = !1, y = new c(!1), w.set(arguments[I], y), w = y;
            }
            return x && (w.has(arguments[S]) ? R = w.get(arguments[S]) : x = !1), x || (R = g.apply(null, arguments), w.set(arguments[S], R)),
            d > 0 && (A[S] = {
              cacheItem: w,
              arg: arguments[S]
            }, x ? l(v, A) : v.push(A), v.length > d && s(v.shift())), m.wasMemoized = x, m.numArgs = S + 1, R;
          }, "memoizerific");
          return m.limit = d, m.wasMemoized = !1, m.cache = h, m.lru = v, m;
        };
      };
      function l(d, h) {
        var v = d.length, g = h.length, m, w, y;
        for (w = 0; w < v; w++) {
          for (m = !0, y = 0; y < g; y++)
            if (!u(d[w][y].arg, h[y].arg)) {
              m = !1;
              break;
            }
          if (m)
            break;
        }
        d.push(d.splice(w, 1)[0]);
      }
      a(l, "moveToMostRecentLru");
      function s(d) {
        var h = d.length, v = d[h - 1], g, m;
        for (v.cacheItem.delete(v.arg), m = h - 2; m >= 0 && (v = d[m], g = v.cacheItem.get(v.arg), !g || !g.size); m--)
          v.cacheItem.delete(v.arg);
      }
      a(s, "removeCachedResult");
      function u(d, h) {
        return d === h || d !== d && h !== h;
      }
      a(u, "isEqual");
    }, { "map-or-similar": 1 }] }, {}, [3])(3);
  });
});

// ../node_modules/lodash/_baseSet.js
var ui = p((nS, fi) => {
  var xh = Gt(), Ah = je(), Eh = De(), ci = $(), _h = ve();
  function bh(e, t, r, n) {
    if (!ci(e))
      return e;
    t = Ah(t, e);
    for (var o = -1, i = t.length, c = i - 1, l = e; l != null && ++o < i; ) {
      var s = _h(t[o]), u = r;
      if (s === "__proto__" || s === "constructor" || s === "prototype")
        return e;
      if (o != c) {
        var d = l[s];
        u = n ? n(d, s, l) : void 0, u === void 0 && (u = ci(d) ? d : Eh(t[o + 1]) ? [] : {});
      }
      xh(l, s, u), l = l[s];
    }
    return e;
  }
  a(bh, "baseSet");
  fi.exports = bh;
});

// ../node_modules/lodash/_basePickBy.js
var hi = p((iS, di) => {
  var Ph = gt(), Mh = ui(), Ch = je();
  function zh(e, t, r) {
    for (var n = -1, o = t.length, i = {}; ++n < o; ) {
      var c = t[n], l = Ph(e, c);
      r(l, c) && Mh(i, Ch(c, e), l);
    }
    return i;
  }
  a(zh, "basePickBy");
  di.exports = zh;
});

// ../node_modules/lodash/_basePick.js
var vi = p((sS, pi) => {
  var Hh = hi(), Oh = vr();
  function Lh(e, t) {
    return Hh(e, t, function(r, n) {
      return Oh(e, n);
    });
  }
  a(Lh, "basePick");
  pi.exports = Lh;
});

// ../node_modules/lodash/_isFlattenable.js
var yi = p((fS, wi) => {
  var gi = oe(), Th = Te(), Bh = D(), mi = gi ? gi.isConcatSpreadable : void 0;
  function qh(e) {
    return Bh(e) || Th(e) || !!(mi && e && e[mi]);
  }
  a(qh, "isFlattenable");
  wi.exports = qh;
});

// ../node_modules/lodash/_baseFlatten.js
var Ii = p((dS, Si) => {
  var Vh = Qt(), Dh = yi();
  function Ri(e, t, r, n, o) {
    var i = -1, c = e.length;
    for (r || (r = Dh), o || (o = []); ++i < c; ) {
      var l = e[i];
      t > 0 && r(l) ? t > 1 ? Ri(l, t - 1, r, n, o) : Vh(o, l) : n || (o[o.length] = l);
    }
    return o;
  }
  a(Ri, "baseFlatten");
  Si.exports = Ri;
});

// ../node_modules/lodash/flatten.js
var Ai = p((pS, xi) => {
  var Nh = Ii();
  function jh(e) {
    var t = e == null ? 0 : e.length;
    return t ? Nh(e, 1) : [];
  }
  a(jh, "flatten");
  xi.exports = jh;
});

// ../node_modules/lodash/_flatRest.js
var _i = p((gS, Ei) => {
  var Fh = Ai(), Gh = $t(), Uh = Kt();
  function kh(e) {
    return Uh(Gh(e, void 0, Fh), e + "");
  }
  a(kh, "flatRest");
  Ei.exports = kh;
});

// ../node_modules/lodash/pick.js
var Pi = p((wS, bi) => {
  var $h = vi(), Kh = _i(), Wh = Kh(function(e, t) {
    return e == null ? {} : $h(e, t);
  });
  bi.exports = Wh;
});

// ../node_modules/lodash/partition.js
var Hi = p((ES, zi) => {
  var Zh = mr(), ep = Zh(function(e, t, r) {
    e[r ? 0 : 1].push(t);
  }, function() {
    return [[], []];
  });
  zi.exports = ep;
});

// ../node_modules/store2/dist/store2.js
var Fi = p((It, xt) => {
  (function(e, t) {
    var r = {
      version: "2.14.2",
      areas: {},
      apis: {},
      nsdelim: ".",
      // utilities
      inherit: /* @__PURE__ */ a(function(o, i) {
        for (var c in o)
          i.hasOwnProperty(c) || Object.defineProperty(i, c, Object.getOwnPropertyDescriptor(o, c));
        return i;
      }, "inherit"),
      stringify: /* @__PURE__ */ a(function(o, i) {
        return o === void 0 || typeof o == "function" ? o + "" : JSON.stringify(o, i || r.replace);
      }, "stringify"),
      parse: /* @__PURE__ */ a(function(o, i) {
        try {
          return JSON.parse(o, i || r.revive);
        } catch {
          return o;
        }
      }, "parse"),
      // extension hooks
      fn: /* @__PURE__ */ a(function(o, i) {
        r.storeAPI[o] = i;
        for (var c in r.apis)
          r.apis[c][o] = i;
      }, "fn"),
      get: /* @__PURE__ */ a(function(o, i) {
        return o.getItem(i);
      }, "get"),
      set: /* @__PURE__ */ a(function(o, i, c) {
        o.setItem(i, c);
      }, "set"),
      remove: /* @__PURE__ */ a(function(o, i) {
        o.removeItem(i);
      }, "remove"),
      key: /* @__PURE__ */ a(function(o, i) {
        return o.key(i);
      }, "key"),
      length: /* @__PURE__ */ a(function(o) {
        return o.length;
      }, "length"),
      clear: /* @__PURE__ */ a(function(o) {
        o.clear();
      }, "clear"),
      // core functions
      Store: /* @__PURE__ */ a(function(o, i, c) {
        var l = r.inherit(r.storeAPI, function(u, d, h) {
          return arguments.length === 0 ? l.getAll() : typeof d == "function" ? l.transact(u, d, h) : d !== void 0 ? l.set(u, d, h) : typeof u ==
          "string" || typeof u == "number" ? l.get(u) : typeof u == "function" ? l.each(u) : u ? l.setAll(u, d) : l.clear();
        });
        l._id = o;
        try {
          var s = "__store2_test";
          i.setItem(s, "ok"), l._area = i, i.removeItem(s);
        } catch {
          l._area = r.storage("fake");
        }
        return l._ns = c || "", r.areas[o] || (r.areas[o] = l._area), r.apis[l._ns + l._id] || (r.apis[l._ns + l._id] = l), l;
      }, "Store"),
      storeAPI: {
        // admin functions
        area: /* @__PURE__ */ a(function(o, i) {
          var c = this[o];
          return (!c || !c.area) && (c = r.Store(o, i, this._ns), this[o] || (this[o] = c)), c;
        }, "area"),
        namespace: /* @__PURE__ */ a(function(o, i, c) {
          if (c = c || this._delim || r.nsdelim, !o)
            return this._ns ? this._ns.substring(0, this._ns.length - c.length) : "";
          var l = o, s = this[l];
          if ((!s || !s.namespace) && (s = r.Store(this._id, this._area, this._ns + l + c), s._delim = c, this[l] || (this[l] = s), !i))
            for (var u in r.areas)
              s.area(u, r.areas[u]);
          return s;
        }, "namespace"),
        isFake: /* @__PURE__ */ a(function(o) {
          return o ? (this._real = this._area, this._area = r.storage("fake")) : o === !1 && (this._area = this._real || this._area), this._area.
          name === "fake";
        }, "isFake"),
        toString: /* @__PURE__ */ a(function() {
          return "store" + (this._ns ? "." + this.namespace() : "") + "[" + this._id + "]";
        }, "toString"),
        // storage functions
        has: /* @__PURE__ */ a(function(o) {
          return this._area.has ? this._area.has(this._in(o)) : this._in(o) in this._area;
        }, "has"),
        size: /* @__PURE__ */ a(function() {
          return this.keys().length;
        }, "size"),
        each: /* @__PURE__ */ a(function(o, i) {
          for (var c = 0, l = r.length(this._area); c < l; c++) {
            var s = this._out(r.key(this._area, c));
            if (s !== void 0 && o.call(this, s, this.get(s), i) === !1)
              break;
            l > r.length(this._area) && (l--, c--);
          }
          return i || this;
        }, "each"),
        keys: /* @__PURE__ */ a(function(o) {
          return this.each(function(i, c, l) {
            l.push(i);
          }, o || []);
        }, "keys"),
        get: /* @__PURE__ */ a(function(o, i) {
          var c = r.get(this._area, this._in(o)), l;
          return typeof i == "function" && (l = i, i = null), c !== null ? r.parse(c, l) : i ?? c;
        }, "get"),
        getAll: /* @__PURE__ */ a(function(o) {
          return this.each(function(i, c, l) {
            l[i] = c;
          }, o || {});
        }, "getAll"),
        transact: /* @__PURE__ */ a(function(o, i, c) {
          var l = this.get(o, c), s = i(l);
          return this.set(o, s === void 0 ? l : s), this;
        }, "transact"),
        set: /* @__PURE__ */ a(function(o, i, c) {
          var l = this.get(o), s;
          return l != null && c === !1 ? i : (typeof c == "function" && (s = c, c = void 0), r.set(this._area, this._in(o), r.stringify(i, s),
          c) || l);
        }, "set"),
        setAll: /* @__PURE__ */ a(function(o, i) {
          var c, l;
          for (var s in o)
            l = o[s], this.set(s, l, i) !== l && (c = !0);
          return c;
        }, "setAll"),
        add: /* @__PURE__ */ a(function(o, i, c) {
          var l = this.get(o);
          if (l instanceof Array)
            i = l.concat(i);
          else if (l !== null) {
            var s = typeof l;
            if (s === typeof i && s === "object") {
              for (var u in i)
                l[u] = i[u];
              i = l;
            } else
              i = l + i;
          }
          return r.set(this._area, this._in(o), r.stringify(i, c)), i;
        }, "add"),
        remove: /* @__PURE__ */ a(function(o, i) {
          var c = this.get(o, i);
          return r.remove(this._area, this._in(o)), c;
        }, "remove"),
        clear: /* @__PURE__ */ a(function() {
          return this._ns ? this.each(function(o) {
            r.remove(this._area, this._in(o));
          }, 1) : r.clear(this._area), this;
        }, "clear"),
        clearAll: /* @__PURE__ */ a(function() {
          var o = this._area;
          for (var i in r.areas)
            r.areas.hasOwnProperty(i) && (this._area = r.areas[i], this.clear());
          return this._area = o, this;
        }, "clearAll"),
        // internal use functions
        _in: /* @__PURE__ */ a(function(o) {
          return typeof o != "string" && (o = r.stringify(o)), this._ns ? this._ns + o : o;
        }, "_in"),
        _out: /* @__PURE__ */ a(function(o) {
          return this._ns ? o && o.indexOf(this._ns) === 0 ? o.substring(this._ns.length) : void 0 : (
            // so each() knows to skip it
            o
          );
        }, "_out")
      },
      // end _.storeAPI
      storage: /* @__PURE__ */ a(function(o) {
        return r.inherit(r.storageAPI, { items: {}, name: o });
      }, "storage"),
      storageAPI: {
        length: 0,
        has: /* @__PURE__ */ a(function(o) {
          return this.items.hasOwnProperty(o);
        }, "has"),
        key: /* @__PURE__ */ a(function(o) {
          var i = 0;
          for (var c in this.items)
            if (this.has(c) && o === i++)
              return c;
        }, "key"),
        setItem: /* @__PURE__ */ a(function(o, i) {
          this.has(o) || this.length++, this.items[o] = i;
        }, "setItem"),
        removeItem: /* @__PURE__ */ a(function(o) {
          this.has(o) && (delete this.items[o], this.length--);
        }, "removeItem"),
        getItem: /* @__PURE__ */ a(function(o) {
          return this.has(o) ? this.items[o] : null;
        }, "getItem"),
        clear: /* @__PURE__ */ a(function() {
          for (var o in this.items)
            this.removeItem(o);
        }, "clear")
      }
      // end _.storageAPI
    }, n = (
      // safely set this up (throws error in IE10/32bit mode for local files)
      r.Store("local", function() {
        try {
          return localStorage;
        } catch {
        }
      }())
    );
    n.local = n, n._ = r, n.area("session", function() {
      try {
        return sessionStorage;
      } catch {
      }
    }()), n.area("page", r.storage("page")), typeof t == "function" && t.amd !== void 0 ? t("store2", [], function() {
      return n;
    }) : typeof xt < "u" && xt.exports ? xt.exports = n : (e.store && (r.conflict = e.store), e.store = n);
  })(It, It && It.define);
});

// src/manager-api/root.tsx
var wl = j(Wt(), 1);
import Ae, {
  Component as F8,
  Fragment as G8,
  useCallback as hl,
  useContext as t0,
  useEffect as ml,
  useMemo as e0,
  useRef as pl
} from "react";
import { deprecate as Zr } from "@storybook/core/client-logger";
import {
  SET_STORIES as U8,
  SHARED_STATE_CHANGED as vl,
  SHARED_STATE_SET as Ke,
  STORY_CHANGED as k8
} from "@storybook/core/core-events";

// src/manager-api/context.ts
import { createContext as uf } from "react";
var R1 = /* @__PURE__ */ a(({ api: e, state: t }) => uf({ api: e, state: t }), "createContext");

// src/manager-api/lib/merge.ts
var qo = j(Bo(), 1), Vo = j(Wt(), 1);
import { logger as Ju } from "@storybook/core/client-logger";
var K = /* @__PURE__ */ a((e, t) => (0, Vo.default)({}, e, t, (r, n) => {
  if (Array.isArray(n) && Array.isArray(r))
    return n.forEach((o) => {
      r.find((c) => c === o || (0, qo.default)(c, o)) || r.push(o);
    }), r;
  if (Array.isArray(r))
    return Ju.log(["the types mismatch, picking", r]), r;
}), "default");

// src/manager-api/initial-state.ts
var Qu = /* @__PURE__ */ a((...e) => e.reduce((t, r) => K(t, r), {}), "main"), ht = Qu;

// src/manager-api/lib/addons.ts
import { Addon_TypesEnum as No } from "@storybook/core/types";

// ../node_modules/@storybook/global/dist/index.mjs
var b = (() => {
  let e;
  return typeof window < "u" ? e = window : typeof globalThis < "u" ? e = globalThis : typeof global < "u" ? e = global : typeof self < "u" ?
  e = self : e = {}, e;
})();

// src/manager-api/lib/addons.ts
import { logger as Zu } from "@storybook/core/client-logger";
import { SET_CONFIG as Do } from "@storybook/core/core-events";

// src/manager-api/lib/storybook-channel-mock.ts
import { Channel as Xu } from "@storybook/core/channels";
function nr() {
  let e = {
    setHandler: /* @__PURE__ */ a(() => {
    }, "setHandler"),
    send: /* @__PURE__ */ a(() => {
    }, "send")
  };
  return new Xu({ transport: e });
}
a(nr, "mockChannel");

// src/manager-api/lib/addons.ts
var lr = class lr {
  constructor() {
    this.loaders = {};
    this.elements = {};
    this.config = {};
    this.getChannel = /* @__PURE__ */ a(() => (this.channel || this.setChannel(nr()), this.channel), "getChannel");
    this.ready = /* @__PURE__ */ a(() => this.promise, "ready");
    this.hasChannel = /* @__PURE__ */ a(() => !!this.channel, "hasChannel");
    this.setChannel = /* @__PURE__ */ a((t) => {
      this.channel = t, this.resolve();
    }, "setChannel");
    this.setConfig = /* @__PURE__ */ a((t) => {
      Object.assign(this.config, t), this.hasChannel() ? this.getChannel().emit(Do, this.config) : this.ready().then((r) => {
        r.emit(Do, this.config);
      });
    }, "setConfig");
    this.getConfig = /* @__PURE__ */ a(() => this.config, "getConfig");
    /**
     * Registers an addon loader function.
     *
     * @param {string} id - The id of the addon loader.
     * @param {(api: API) => void} callback - The function that will be called to register the addon.
     * @returns {void}
     */
    this.register = /* @__PURE__ */ a((t, r) => {
      this.loaders[t] && Zu.warn(`${t} was loaded twice, this could have bad side-effects`), this.loaders[t] = r;
    }, "register");
    this.loadAddons = /* @__PURE__ */ a((t) => {
      Object.values(this.loaders).forEach((r) => r(t));
    }, "loadAddons");
    this.promise = new Promise((t) => {
      this.resolve = () => t(this.getChannel());
    });
  }
  getElements(t) {
    return this.elements[t] || (this.elements[t] = {}), this.elements[t];
  }
  /**
   * Adds an addon to the addon store.
   *
   * @param {string} id - The id of the addon.
   * @param {Addon_Type} addon - The addon to add.
   * @returns {void}
   */
  add(t, r) {
    let { type: n } = r, o = this.getElements(n);
    o[t] = { ...r, id: t };
  }
};
a(lr, "AddonStore");
var ir = lr, or = "__STORYBOOK_ADDONS_MANAGER";
function e7() {
  return b[or] || (b[or] = new ir()), b[or];
}
a(e7, "getAddonsStore");
var t7 = e7();

// src/manager-api/modules/addons.ts
var cr = {};
B(cr, {
  ensurePanel: () => sr,
  init: () => r7
});
import { Addon_TypesEnum as jo } from "@storybook/core/types";
function sr(e, t, r) {
  let n = Object.keys(e);
  return n.indexOf(t) >= 0 ? t : n.length ? n[0] : r;
}
a(sr, "ensurePanel");
var r7 = /* @__PURE__ */ a(({ provider: e, store: t, fullAPI: r }) => {
  let n = {
    getElements: /* @__PURE__ */ a((o) => e.getElements(o), "getElements"),
    getSelectedPanel: /* @__PURE__ */ a(() => {
      let { selectedPanel: o } = t.getState();
      return sr(n.getElements(jo.PANEL), o, o);
    }, "getSelectedPanel"),
    setSelectedPanel: /* @__PURE__ */ a((o) => {
      t.setState({ selectedPanel: o }, { persistence: "session" });
    }, "setSelectedPanel"),
    setAddonState(o, i, c) {
      let l = typeof i == "function" ? i : () => i;
      return t.setState(
        (s) => ({ ...s, addons: { ...s.addons, [o]: l(s.addons[o]) } }),
        c
      ).then(() => n.getAddonState(o));
    },
    getAddonState: /* @__PURE__ */ a((o) => t.getState().addons[o] || globalThis?.STORYBOOK_ADDON_STATE[o], "getAddonState")
  };
  return {
    api: n,
    state: {
      selectedPanel: sr(
        n.getElements(jo.PANEL),
        t.getState().selectedPanel
      ),
      addons: {}
    }
  };
}, "init");

// src/manager-api/modules/channel.ts
var fr = {};
B(fr, {
  init: () => a7
});
var a7 = /* @__PURE__ */ a(({ provider: e }) => ({ api: {
  getChannel: /* @__PURE__ */ a(() => e.channel, "getChannel"),
  on: /* @__PURE__ */ a((r, n) => (e.channel?.on(r, n), () => e.channel?.off(r, n)), "on"),
  off: /* @__PURE__ */ a((r, n) => e.channel?.off(r, n), "off"),
  once: /* @__PURE__ */ a((r, n) => e.channel?.once(r, n), "once"),
  emit: /* @__PURE__ */ a((r, n, ...o) => {
    n?.options?.target && n.options.target !== "storybook-preview-iframe" && !n.options.target.startsWith("storybook-ref-") && (n.options.target =
    n.options.target !== "storybook_internal" ? `storybook-ref-${n.options.target}` : "storybook-preview-iframe"), e.channel?.emit(r, n, ...o);
  }, "emit")
}, state: {} }), "init");

// src/manager-api/modules/globals.ts
var Ir = {};
B(Ir, {
  init: () => Ih
});
import { logger as si } from "@storybook/core/client-logger";
import { GLOBALS_UPDATED as yh, SET_GLOBALS as Rh, UPDATE_GLOBALS as Sh } from "@storybook/core/core-events";

// ../node_modules/dequal/dist/index.mjs
var Fo = Object.prototype.hasOwnProperty;
function Go(e, t, r) {
  for (r of e.keys())
    if (z(r, t)) return r;
}
a(Go, "find");
function z(e, t) {
  var r, n, o;
  if (e === t) return !0;
  if (e && t && (r = e.constructor) === t.constructor) {
    if (r === Date) return e.getTime() === t.getTime();
    if (r === RegExp) return e.toString() === t.toString();
    if (r === Array) {
      if ((n = e.length) === t.length)
        for (; n-- && z(e[n], t[n]); ) ;
      return n === -1;
    }
    if (r === Set) {
      if (e.size !== t.size)
        return !1;
      for (n of e)
        if (o = n, o && typeof o == "object" && (o = Go(t, o), !o) || !t.has(o)) return !1;
      return !0;
    }
    if (r === Map) {
      if (e.size !== t.size)
        return !1;
      for (n of e)
        if (o = n[0], o && typeof o == "object" && (o = Go(t, o), !o) || !z(n[1], t.get(o)))
          return !1;
      return !0;
    }
    if (r === ArrayBuffer)
      e = new Uint8Array(e), t = new Uint8Array(t);
    else if (r === DataView) {
      if ((n = e.byteLength) === t.byteLength)
        for (; n-- && e.getInt8(n) === t.getInt8(n); ) ;
      return n === -1;
    }
    if (ArrayBuffer.isView(e)) {
      if ((n = e.byteLength) === t.byteLength)
        for (; n-- && e[n] === t[n]; ) ;
      return n === -1;
    }
    if (!r || typeof e == "object") {
      n = 0;
      for (r in e)
        if (Fo.call(e, r) && ++n && !Fo.call(t, r) || !(r in t) || !z(e[r], t[r])) return !1;
      return Object.keys(t).length === n;
    }
  }
  return e !== e && t !== t;
}
a(z, "dequal");

// src/manager-api/lib/events.ts
import { logger as wh } from "@storybook/core/client-logger";

// src/manager-api/modules/refs.ts
var Sr = {};
B(Sr, {
  defaultStoryMapper: () => li,
  getSourceType: () => Rr,
  init: () => mh
});

// ../node_modules/ts-dedent/esm/index.js
function Ne(e) {
  for (var t = [], r = 1; r < arguments.length; r++)
    t[r - 1] = arguments[r];
  var n = Array.from(typeof e == "string" ? [e] : e);
  n[n.length - 1] = n[n.length - 1].replace(/\r?\n([\t ]*)$/, "");
  var o = n.reduce(function(l, s) {
    var u = s.match(/\n([\t ]+|(?!\s).)/g);
    return u ? l.concat(u.map(function(d) {
      var h, v;
      return (v = (h = d.match(/[\t ]/g)) === null || h === void 0 ? void 0 : h.length) !== null && v !== void 0 ? v : 0;
    })) : l;
  }, []);
  if (o.length) {
    var i = new RegExp(`
[	 ]{` + Math.min.apply(Math, o) + "}", "g");
    n = n.map(function(l) {
      return l.replace(i, `
`);
    });
  }
  n[0] = n[0].replace(/^\r?\n/, "");
  var c = n[0];
  return t.forEach(function(l, s) {
    var u = c.match(/(?:^|\n)( *)$/), d = u ? u[1] : "", h = l;
    typeof l == "string" && l.includes(`
`) && (h = String(l).split(`
`).map(function(v, g) {
      return g === 0 ? v : "" + d + v;
    }).join(`
`)), c += h + n[s + 1];
  }), c;
}
a(Ne, "dedent");

// src/manager-api/lib/stories.ts
var Q5 = j(K5(), 1), X5 = j(Y5(), 1), yr = j(mt(), 1);
import { sanitize as sh } from "@storybook/csf";
var ch = /\s*\/\s*/, Z5 = /* @__PURE__ */ a(({
  globalParameters: e,
  kindParameters: t,
  stories: r
}) => (0, X5.default)(r, (n) => ({
  ...n,
  parameters: ni(
    e,
    t[n.kind],
    n.parameters
  )
})), "denormalizeStoryParameters");
var ei = /* @__PURE__ */ a((e) => ({ v: 5, entries: Object.entries(e).reduce(
  (r, [n, o]) => {
    if (!o)
      return r;
    let { docsOnly: i, fileName: c, ...l } = o.parameters, s = {
      title: o.kind,
      id: n,
      name: o.name,
      importPath: c
    };
    if (i)
      r[n] = {
        type: "docs",
        tags: ["stories-mdx"],
        storiesImports: [],
        ...s
      };
    else {
      let { argTypes: u, args: d, initialArgs: h } = o;
      r[n] = {
        type: "story",
        ...s,
        parameters: l,
        argTypes: u,
        args: d,
        initialArgs: h
      };
    }
    return r;
  },
  {}
) }), "transformSetStoriesStoryDataToPreparedStoryIndex"), fh = /* @__PURE__ */ a((e) => ({
  v: 3,
  stories: Object.values(e.stories).reduce(
    (t, r) => (t[r.id] = {
      ...r,
      title: r.kind,
      name: r.name || r.story,
      importPath: r.parameters.fileName || ""
    }, t),
    {}
  )
}), "transformStoryIndexV2toV3"), uh = /* @__PURE__ */ a((e) => {
  let t = (0, Q5.default)(Object.values(e.stories), "title");
  return {
    v: 4,
    entries: Object.values(e.stories).reduce(
      (r, n) => {
        let o = "story";
        return (n.parameters?.docsOnly || n.name === "Page" && t[n.title] === 1) && (o = "docs"), r[n.id] = {
          type: o,
          ...o === "docs" && { tags: ["stories-mdx"], storiesImports: [] },
          ...n
        }, delete r[n.id].story, delete r[n.id].kind, r;
      },
      {}
    )
  };
}, "transformStoryIndexV3toV4"), dh = /* @__PURE__ */ a((e) => ({
  v: 5,
  entries: Object.values(e.entries).reduce(
    (t, r) => (t[r.id] = {
      ...r,
      tags: r.tags ? ["dev", "test", ...r.tags] : ["dev"]
    }, t),
    {}
  )
}), "transformStoryIndexV4toV5"), wt = /* @__PURE__ */ a((e, { provider: t, docsOptions: r, filters: n, status: o }) => {
  if (!e.v)
    throw new Error("Composition: Missing stories.json version");
  let i = e;
  i = i.v === 2 ? fh(i) : i, i = i.v === 3 ? uh(i) : i, i = i.v === 4 ? dh(i) : i, i = i;
  let c = Object.values(i.entries).filter((w) => {
    let y = !0;
    return Object.values(n).forEach((R) => {
      y !== !1 && (y = R({ ...w, status: o[w.id] }));
    }), y;
  }), { sidebar: l = {} } = t.getConfig(), { showRoots: s, collapsedRoots: u = [], renderLabel: d } = l, h = typeof s < "u", v = c.reduce((w, y) => {
    if (r.docsMode && y.type !== "docs")
      return w;
    let { title: R } = y, S = R.trim().split(ch), A = (!h || s) && S.length > 1 ? [S.shift()] : [], x = [...A, ...S], I = x.reduce((E, C, U) => {
      let Ee = U > 0 && E[U - 1], _e = sh(Ee ? `${Ee}-${C}` : C);
      if (C.trim() === "")
        throw new Error(Ne`Invalid title ${R} ending in slash.`);
      if (Ee === _e)
        throw new Error(
          Ne`
          Invalid part '${C}', leading to id === parentId ('${_e}'), inside title '${R}'
          
          Did you create a path that uses the separator char accidentally, such as 'Vue <docs/>' where '/' is a separator char? See https://github.com/storybookjs/storybook/issues/6128
          `
        );
      return E.push(_e), E;
    }, []);
    return I.forEach((E, C) => {
      let U = I[C + 1] || y.id;
      A.length && C === 0 ? w[E] = K(w[E] || {}, {
        type: "root",
        id: E,
        name: x[C],
        depth: C,
        renderLabel: d,
        startCollapsed: u.includes(E),
        // Note that this will later get appended to the previous list of children (see below)
        children: [U]
      }) : (!w[E] || w[E].type === "component") && C === I.length - 1 ? w[E] = K(w[E] || {}, {
        type: "component",
        id: E,
        name: x[C],
        parent: I[C - 1],
        depth: C,
        renderLabel: d,
        ...U && {
          children: [U]
        }
      }) : w[E] = K(w[E] || {}, {
        type: "group",
        id: E,
        name: x[C],
        parent: I[C - 1],
        depth: C,
        renderLabel: d,
        ...U && {
          children: [U]
        }
      });
    }), w[y.id] = {
      type: "story",
      ...y,
      depth: I.length,
      parent: I[I.length - 1],
      renderLabel: d,
      prepared: !!y.parameters
    }, w;
  }, {});
  function g(w, y) {
    return w[y.id] || (w[y.id] = y, (y.type === "root" || y.type === "group" || y.type === "component") && y.children.forEach((R) => g(w, v[R]))),
    w;
  }
  a(g, "addItem");
  let m = Object.values(v).filter((w) => w.type !== "root" && !w.parent).reduce(g, {});
  return Object.values(v).filter((w) => w.type === "root").reduce(g, m);
}, "transformStoryIndexToStoriesHash"), ti = /* @__PURE__ */ a((e, t) => t ? Object.fromEntries(
  Object.entries(e).map(([r, n]) => {
    let o = t[r];
    return n.type === "story" && o?.type === "story" && o.prepared ? [r, { ...o, ...n, prepared: !0 }] : [r, n];
  })
) : e, "addPreparedStories"), ri = (0, yr.default)(1)((e) => Object.entries(e).reduce((t, r) => {
  let n = r[1];
  return n.type === "component" && t.push([...n.children]), t;
}, [])), ai = (0, yr.default)(1)((e) => Object.keys(e).filter((t) => ["story", "docs"].includes(e[t].type)));

// src/manager-api/modules/refs.ts
var { location: hh, fetch: oi } = b, Rr = /* @__PURE__ */ a((e, t) => {
  let { origin: r, pathname: n } = hh, { origin: o, pathname: i } = new URL(e), c = `${r + n}`.replace("/iframe.html", "").replace(/\/$/, ""),
  l = `${o + i}`.replace("/iframe.html", "").replace(/\/$/, "");
  return c === l ? ["local", l] : t || e ? ["external", l] : [null, null];
}, "getSourceType"), li = /* @__PURE__ */ a((e, t) => ({ ...t, kind: t.kind.replace("|", "/") }), "defaultStoryMapper"), ph = /* @__PURE__ */ a(
(e, t) => Object.entries(e).reduce((r, [n, o]) => ({ ...r, [n]: { ...o, refId: t.id } }), {}), "addRefIds");
async function ii(e) {
  if (!e)
    return {};
  try {
    let t = await e;
    if (t === !1 || t === !0)
      throw new Error("Unexpected boolean response");
    if (!t.ok)
      throw new Error(`Unexpected response not OK: ${t.statusText}`);
    let r = await t.json();
    return r.entries || r.stories ? { storyIndex: r } : r;
  } catch (t) {
    return { indexError: t };
  }
}
a(ii, "handleRequest");
var vh = /* @__PURE__ */ a((e) => {
  let t = /https?:\/\/(.+:.+)@/, r = e, n, [, o] = e.match(t) || [];
  return o && (r = e.replace(`${o}@`, ""), n = btoa(`${o}`)), {
    url: r,
    authorization: n
  };
}, "parseUrl"), gh = /* @__PURE__ */ a((e, t, r) => {
  let { storyMapper: n } = r;
  return n ? Object.entries(e).reduce((o, [i, c]) => ({ ...o, [i]: n(t, c) }), {}) : e;
}, "map"), mh = /* @__PURE__ */ a(({ store: e, provider: t, singleStory: r, docsOptions: n = {} }, { runCheck: o = !0 } = {}) => {
  let i = {
    findRef: /* @__PURE__ */ a((s) => {
      let u = i.getRefs();
      return Object.values(u).find(({ url: d }) => d.match(s));
    }, "findRef"),
    changeRefVersion: /* @__PURE__ */ a(async (s, u) => {
      let { versions: d, title: h } = i.getRefs()[s], v = { id: s, url: u, versions: d, title: h, index: {}, expanded: !0 };
      await i.setRef(s, { ...v, type: "unknown" }, !1), await i.checkRef(v);
    }, "changeRefVersion"),
    changeRefState: /* @__PURE__ */ a((s, u) => {
      let { [s]: d, ...h } = i.getRefs();
      h[s] = { ...d, previewInitialized: u }, e.setState({
        refs: h
      });
    }, "changeRefState"),
    checkRef: /* @__PURE__ */ a(async (s) => {
      let { id: u, url: d, version: h, type: v } = s, g = v === "server-checked", m = {}, w = h ? `?version=${h}` : "", y = g ? "omit" : "in\
clude", R = vh(d), S = {
        Accept: "application/json"
      };
      R.authorization && Object.assign(S, {
        Authorization: `Basic ${R.authorization}`
      });
      let [A, x] = await Promise.all(
        ["index.json", "stories.json"].map(
          async (E) => ii(
            oi(`${R.url}/${E}${w}`, {
              headers: S,
              credentials: y
            })
          )
        )
      );
      if (!A.indexError || !x.indexError) {
        let E = await ii(
          oi(`${R.url}/metadata.json${w}`, {
            headers: S,
            credentials: y,
            cache: "no-cache"
          }).catch(() => !1)
        );
        Object.assign(m, {
          ...A.indexError ? x : A,
          ...!E.indexError && E
        });
      } else g || (m.indexError = {
        message: Ne`
            Error: Loading of ref failed
              at fetch (lib/api/src/modules/refs.ts)

            URL: ${R.url}

            We weren't able to load the above URL,
            it's possible a CORS error happened.

            Please check your dev-tools network tab.
          `
      });
      let I = s.versions && Object.keys(s.versions).length ? s.versions : m.versions;
      await i.setRef(u, {
        id: u,
        url: R.url,
        ...m,
        ...I ? { versions: I } : {},
        type: m.storyIndex ? "lazy" : "auto-inject"
      });
    }, "checkRef"),
    getRefs: /* @__PURE__ */ a(() => {
      let { refs: s = {} } = e.getState();
      return s;
    }, "getRefs"),
    setRef: /* @__PURE__ */ a(async (s, { storyIndex: u, setStoriesData: d, ...h }, v = !1) => {
      if (r)
        return;
      let g, m, { filters: w } = e.getState(), { storyMapper: y = li } = t.getConfig(), R = i.getRefs()[s];
      (u || d) && (g = d ? ei(
        gh(d, R, { storyMapper: y })
      ) : u, m = wt(u, {
        provider: t,
        docsOptions: n,
        filters: w,
        status: {}
      })), m && (m = ph(m, R)), await i.updateRef(s, { ...R, ...h, index: m, internal_index: g });
    }, "setRef"),
    updateRef: /* @__PURE__ */ a(async (s, u) => {
      let { [s]: d, ...h } = i.getRefs();
      h[s] = { ...d, ...u };
      let v = Object.keys(l).reduce((g, m) => (g[m] = h[m], g), {});
      await e.setState({
        refs: v
      });
    }, "updateRef")
  }, c = !r && b.REFS || {}, l = c;
  return o && new Promise(async (s) => {
    for (let u of Object.values(c))
      await i.checkRef({ ...u, stories: {} });
    s(void 0);
  }), {
    api: i,
    state: {
      refs: l
    }
  };
}, "init");

// src/manager-api/lib/events.ts
var L = /* @__PURE__ */ a((e, t) => {
  let { source: r, refId: n, type: o } = e, [i, c] = Rr(r, n), l;
  (n || i === "external") && (l = n && t.getRefs()[n] ? t.getRefs()[n] : t.findRef(c));
  let s = {
    source: r,
    sourceType: i,
    sourceLocation: c,
    refId: n,
    ref: l,
    type: o
  };
  switch (!0) {
    case typeof n == "string":
    case i === "local":
    case i === "external":
      return s;
    default:
      return wh.warn(`Received a ${o} frame that was not configured as a ref`), null;
  }
}, "getEventMetadata");

// src/manager-api/modules/globals.ts
var Ih = /* @__PURE__ */ a(({ store: e, fullAPI: t, provider: r }) => {
  let n = {
    getGlobals() {
      return e.getState().globals;
    },
    getUserGlobals() {
      return e.getState().userGlobals;
    },
    getStoryGlobals() {
      return e.getState().storyGlobals;
    },
    getGlobalTypes() {
      return e.getState().globalTypes;
    },
    updateGlobals(c) {
      r.channel?.emit(Sh, {
        globals: c,
        options: {
          target: "storybook-preview-iframe"
        }
      });
    }
  }, o = {
    globals: {},
    userGlobals: {},
    storyGlobals: {},
    globalTypes: {}
  }, i = /* @__PURE__ */ a(({
    globals: c,
    storyGlobals: l,
    userGlobals: s
  }) => {
    let {
      globals: u,
      userGlobals: d,
      storyGlobals: h
    } = e.getState();
    z(c, u) || e.setState({ globals: c }), z(s, d) || e.setState({ userGlobals: s }), z(l, h) || e.setState({ storyGlobals: l });
  }, "updateGlobals");
  return r.channel?.on(
    yh,
    /* @__PURE__ */ a(function({ globals: l, storyGlobals: s, userGlobals: u }) {
      let { ref: d } = L(this, t);
      d ? si.warn(
        "received a GLOBALS_UPDATED from a non-local ref. This is not currently supported."
      ) : i({ globals: l, storyGlobals: s, userGlobals: u });
    }, "handleGlobalsUpdated")
  ), r.channel?.on(
    Rh,
    /* @__PURE__ */ a(function({ globals: l, globalTypes: s }) {
      let { ref: u } = L(this, t), d = e.getState()?.globals;
      u ? Object.keys(l).length > 0 && si.warn("received globals from a non-local ref. This is not currently supported.") : e.setState({ globals: l,
      userGlobals: l, globalTypes: s }), d && Object.keys(d).length !== 0 && !z(l, d) && n.updateGlobals(d);
    }, "handleSetGlobals")
  ), {
    api: n,
    state: o
  };
}, "init");

// src/manager-api/modules/layout.ts
var Rt = {};
B(Rt, {
  ActiveTabs: () => Ci,
  defaultLayoutState: () => q,
  focusableUIElements: () => Fe,
  init: () => Xh
});
import { create as Yh } from "@storybook/core/theming/create";
import { SET_CONFIG as Jh } from "@storybook/core/core-events";
var ge = j(Pi(), 1);
var { document: Qh } = b, Ci = {
  SIDEBAR: "sidebar",
  CANVAS: "canvas",
  ADDONS: "addons"
}, q = {
  ui: {
    enableShortcuts: !0
  },
  layout: {
    initialActive: Ci.CANVAS,
    showToolbar: !0,
    navSize: 300,
    bottomPanelHeight: 300,
    rightPanelWidth: 400,
    recentVisibleSizes: {
      navSize: 300,
      bottomPanelHeight: 300,
      rightPanelWidth: 400
    },
    panelPosition: "bottom",
    showTabs: !0
  },
  selectedPanel: void 0,
  theme: Yh()
}, Fe = {
  storySearchField: "storybook-explorer-searchfield",
  storyListMenu: "storybook-explorer-menu",
  storyPanelRoot: "storybook-panel-root"
}, xr = /* @__PURE__ */ a((e) => e.layout.navSize > 0, "getIsNavShown"), Ar = /* @__PURE__ */ a((e) => {
  let { bottomPanelHeight: t, rightPanelWidth: r, panelPosition: n } = e.layout;
  return n === "bottom" && t > 0 || n === "right" && r > 0;
}, "getIsPanelShown"), Mi = /* @__PURE__ */ a((e) => !xr(e) && !Ar(e), "getIsFullscreen"), yt = /* @__PURE__ */ a((e) => ({
  navSize: e.navSize > 0 ? e.navSize : e.recentVisibleSizes.navSize,
  bottomPanelHeight: e.bottomPanelHeight > 0 ? e.bottomPanelHeight : e.recentVisibleSizes.bottomPanelHeight,
  rightPanelWidth: e.rightPanelWidth > 0 ? e.rightPanelWidth : e.recentVisibleSizes.rightPanelWidth
}), "getRecentVisibleSizes"), Xh = /* @__PURE__ */ a(({ store: e, provider: t, singleStory: r }) => {
  let n = {
    toggleFullscreen(i) {
      return e.setState(
        (c) => {
          let l = Mi(c), s = typeof i == "boolean" ? i : !l;
          return s === l ? { layout: c.layout } : s ? {
            layout: {
              ...c.layout,
              navSize: 0,
              bottomPanelHeight: 0,
              rightPanelWidth: 0,
              recentVisibleSizes: yt(c.layout)
            }
          } : {
            layout: {
              ...c.layout,
              navSize: c.singleStory ? 0 : c.layout.recentVisibleSizes.navSize,
              bottomPanelHeight: c.layout.recentVisibleSizes.bottomPanelHeight,
              rightPanelWidth: c.layout.recentVisibleSizes.rightPanelWidth
            }
          };
        },
        { persistence: "session" }
      );
    },
    togglePanel(i) {
      return e.setState(
        (c) => {
          let l = Ar(c), s = typeof i == "boolean" ? i : !l;
          return s === l ? { layout: c.layout } : s ? {
            layout: {
              ...c.layout,
              bottomPanelHeight: c.layout.recentVisibleSizes.bottomPanelHeight,
              rightPanelWidth: c.layout.recentVisibleSizes.rightPanelWidth
            }
          } : {
            layout: {
              ...c.layout,
              bottomPanelHeight: 0,
              rightPanelWidth: 0,
              recentVisibleSizes: yt(c.layout)
            }
          };
        },
        { persistence: "session" }
      );
    },
    togglePanelPosition(i) {
      return e.setState(
        (c) => {
          let l = i || (c.layout.panelPosition === "right" ? "bottom" : "right");
          return {
            layout: {
              ...c.layout,
              panelPosition: l,
              bottomPanelHeight: c.layout.recentVisibleSizes.bottomPanelHeight,
              rightPanelWidth: c.layout.recentVisibleSizes.rightPanelWidth
            }
          };
        },
        { persistence: "permanent" }
      );
    },
    toggleNav(i) {
      return e.setState(
        (c) => {
          if (c.singleStory)
            return { layout: c.layout };
          let l = xr(c), s = typeof i == "boolean" ? i : !l;
          return s === l ? { layout: c.layout } : s ? {
            layout: {
              ...c.layout,
              navSize: c.layout.recentVisibleSizes.navSize
            }
          } : {
            layout: {
              ...c.layout,
              navSize: 0,
              recentVisibleSizes: yt(c.layout)
            }
          };
        },
        { persistence: "session" }
      );
    },
    toggleToolbar(i) {
      return e.setState(
        (c) => {
          let l = typeof i < "u" ? i : !c.layout.showToolbar;
          return {
            layout: {
              ...c.layout,
              showToolbar: l
            }
          };
        },
        { persistence: "session" }
      );
    },
    setSizes({
      navSize: i,
      bottomPanelHeight: c,
      rightPanelWidth: l
    }) {
      return e.setState(
        (s) => {
          let u = {
            ...s.layout,
            navSize: i ?? s.layout.navSize,
            bottomPanelHeight: c ?? s.layout.bottomPanelHeight,
            rightPanelWidth: l ?? s.layout.rightPanelWidth
          };
          return {
            layout: {
              ...u,
              recentVisibleSizes: yt(u)
            }
          };
        },
        { persistence: "session" }
      );
    },
    focusOnUIElement(i, c) {
      if (!i)
        return;
      let l = Qh.getElementById(i);
      l && (l.focus(), c && l.select());
    },
    getInitialOptions() {
      let { theme: i, selectedPanel: c, ...l } = t.getConfig();
      return {
        ...q,
        layout: {
          ...q.layout,
          ...(0, ge.default)(l, Object.keys(q.layout)),
          ...r && { navSize: 0 }
        },
        ui: {
          ...q.ui,
          ...(0, ge.default)(l, Object.keys(q.ui))
        },
        selectedPanel: c || q.selectedPanel,
        theme: i || q.theme
      };
    },
    getIsFullscreen() {
      return Mi(e.getState());
    },
    getIsPanelShown() {
      return Ar(e.getState());
    },
    getIsNavShown() {
      return xr(e.getState());
    },
    setOptions: /* @__PURE__ */ a((i) => {
      let { layout: c, ui: l, selectedPanel: s, theme: u } = e.getState();
      if (!i)
        return;
      let d = {
        ...c,
        ...i.layout,
        ...(0, ge.default)(i, Object.keys(c)),
        ...r && { navSize: 0 }
      }, h = {
        ...l,
        ...i.ui,
        ...(0, ge.default)(i, Object.keys(l))
      }, v = {
        ...u,
        ...i.theme
      }, g = {};
      z(l, h) || (g.ui = h), z(c, d) || (g.layout = d), i.selectedPanel && !z(s, i.selectedPanel) && (g.selectedPanel = i.selectedPanel), Object.
      keys(g).length && e.setState(g, { persistence: "permanent" }), z(u, v) || e.setState({ theme: v });
    }, "setOptions")
  }, o = (0, ge.default)(e.getState(), "layout", "selectedPanel");
  return t.channel?.on(Jh, () => {
    n.setOptions(K(n.getInitialOptions(), o));
  }), {
    api: n,
    state: K(n.getInitialOptions(), o)
  };
}, "init");

// src/manager-api/modules/notifications.ts
var _r = {};
B(_r, {
  init: () => tp
});
var Er = j(Hi(), 1);
var tp = /* @__PURE__ */ a(({ store: e }) => ({ api: {
  addNotification: /* @__PURE__ */ a((n) => {
    e.setState(({ notifications: o }) => {
      let [i, c] = (0, Er.default)(o, (l) => l.id === n.id);
      return i.forEach((l) => {
        l.onClear && l.onClear({ dismissed: !1, timeout: !1 });
      }), { notifications: [...c, n] };
    });
  }, "addNotification"),
  clearNotification: /* @__PURE__ */ a((n) => {
    e.setState(({ notifications: o }) => {
      let [i, c] = (0, Er.default)(o, (l) => l.id === n);
      return i.forEach((l) => {
        l.onClear && l.onClear({ dismissed: !1, timeout: !1 });
      }), { notifications: c };
    });
  }, "clearNotification")
}, state: { notifications: [] } }), "init");

// src/manager-api/modules/provider.ts
var br = {};
B(br, {
  init: () => rp
});
var rp = /* @__PURE__ */ a(({ provider: e, fullAPI: t }) => ({
  api: e.renderPreview ? { renderPreview: e.renderPreview } : {},
  state: {},
  init: /* @__PURE__ */ a(() => {
    e.handleAPI(t);
  }, "init")
}), "init");

// src/manager-api/modules/settings.ts
var Pr = {};
B(Pr, {
  init: () => ap
});
var ap = /* @__PURE__ */ a(({ store: e, navigate: t, fullAPI: r }) => ({
  state: { settings: { lastTrackedStoryId: null } },
  api: {
    closeSettings: /* @__PURE__ */ a(() => {
      let {
        settings: { lastTrackedStoryId: i }
      } = e.getState();
      i ? r.selectStory(i) : r.selectFirstStory();
    }, "closeSettings"),
    changeSettingsTab: /* @__PURE__ */ a((i) => {
      t(`/settings/${i}`);
    }, "changeSettingsTab"),
    isSettingsScreenActive: /* @__PURE__ */ a(() => {
      let { path: i } = r.getUrlState();
      return !!(i || "").match(/^\/settings/);
    }, "isSettingsScreenActive"),
    retrieveSelection() {
      let { settings: i } = e.getState();
      return i.lastTrackedStoryId;
    },
    storeSelection: /* @__PURE__ */ a(async () => {
      let { storyId: i, settings: c } = e.getState();
      await e.setState({
        settings: { ...c, lastTrackedStoryId: i }
      });
    }, "storeSelection")
  }
}), "init");

// src/manager-api/modules/shortcuts.ts
var Br = {};
B(Br, {
  controlOrMetaKey: () => me,
  defaultShortcuts: () => we,
  init: () => up,
  isMacLike: () => Li,
  keys: () => Tr
});
import {
  FORCE_REMOUNT as ip,
  PREVIEW_KEYDOWN as lp,
  STORIES_COLLAPSE_ALL as sp,
  STORIES_EXPAND_ALL as cp
} from "@storybook/core/core-events";

// src/manager-api/lib/shortcut.ts
var { navigator: Mr } = b, Cr = /* @__PURE__ */ a(() => Mr && Mr.platform ? !!Mr.platform.match(/(Mac|iPhone|iPod|iPad)/i) : !1, "isMacLike"),
CS = /* @__PURE__ */ a(() => Cr() ? "\u2318" : "ctrl", "controlOrMetaSymbol"), zS = /* @__PURE__ */ a(() => Cr() ? "meta" : "control", "cont\
rolOrMetaKey"), np = /* @__PURE__ */ a(() => Cr() ? "\u2325" : "alt", "optionOrAltSymbol"), HS = /* @__PURE__ */ a((e, t) => JSON.stringify(
e) === JSON.stringify(t), "isShortcutTaken"), zr = /* @__PURE__ */ a((e) => {
  if (["Meta", "Alt", "Control", "Shift"].includes(e.key))
    return null;
  let t = [];
  if (e.altKey && t.push("alt"), e.ctrlKey && t.push("control"), e.metaKey && t.push("meta"), e.shiftKey && t.push("shift"), e.key && e.key.
  length === 1 && e.key !== " ") {
    let r = e.key.toUpperCase(), n = e.code?.toUpperCase().replace("KEY", "").replace("DIGIT", "");
    n && n.length === 1 && n !== r ? t.push([r, n]) : t.push(r);
  }
  return e.key === " " && t.push("space"), e.key === "Escape" && t.push("escape"), e.key === "ArrowRight" && t.push("ArrowRight"), e.key ===
  "ArrowDown" && t.push("ArrowDown"), e.key === "ArrowUp" && t.push("ArrowUp"), e.key === "ArrowLeft" && t.push("ArrowLeft"), t.length > 0 ?
  t : null;
}, "eventToShortcut"), Hr = /* @__PURE__ */ a((e, t) => !e || !t || (e.join("").startsWith("shift/") && e.shift(), e.length !== t.length) ? !1 :
!e.find(
  (r, n) => Array.isArray(r) ? !r.includes(t[n]) : r !== t[n]
), "shortcutMatchesShortcut"), OS = /* @__PURE__ */ a((e, t) => Hr(zr(e), t), "eventMatchesShortcut"), op = /* @__PURE__ */ a((e) => e === "\
alt" ? np() : e === "control" ? "\u2303" : e === "meta" ? "\u2318" : e === "shift" ? "\u21E7\u200B" : e === "Enter" || e === "Backspace" || e ===
"Esc" || e === "escape" ? "" : e === " " ? "SPACE" : e === "ArrowUp" ? "\u2191" : e === "ArrowDown" ? "\u2193" : e === "ArrowLeft" ? "\u2190" :
e === "ArrowRight" ? "\u2192" : e.toUpperCase(), "keyToSymbol"), LS = /* @__PURE__ */ a((e) => e.map(op).join(" "), "shortcutToHumanString");

// src/manager-api/modules/shortcuts.ts
var { navigator: Or, document: Oi } = b, Li = /* @__PURE__ */ a(() => Or && Or.platform ? !!Or.platform.match(/(Mac|iPhone|iPod|iPad)/i) : !1,
"isMacLike"), me = /* @__PURE__ */ a(() => Li() ? "meta" : "control", "controlOrMetaKey");
function Tr(e) {
  return Object.keys(e);
}
a(Tr, "keys");
var we = Object.freeze({
  fullScreen: ["alt", "F"],
  togglePanel: ["alt", "A"],
  panelPosition: ["alt", "D"],
  toggleNav: ["alt", "S"],
  toolbar: ["alt", "T"],
  search: [me(), "K"],
  focusNav: ["1"],
  focusIframe: ["2"],
  focusPanel: ["3"],
  prevComponent: ["alt", "ArrowUp"],
  nextComponent: ["alt", "ArrowDown"],
  prevStory: ["alt", "ArrowLeft"],
  nextStory: ["alt", "ArrowRight"],
  shortcutsPage: [me(), "shift", ","],
  aboutPage: [me(), ","],
  escape: ["escape"],
  // This one is not customizable
  collapseAll: [me(), "shift", "ArrowUp"],
  expandAll: [me(), "shift", "ArrowDown"],
  remount: ["alt", "R"]
}), Lr = {};
function fp(e) {
  let t = e.target;
  return /input|textarea/i.test(t.tagName) || t.getAttribute("contenteditable") !== null;
}
a(fp, "focusInInput");
var up = /* @__PURE__ */ a(({ store: e, fullAPI: t, provider: r }) => {
  let n = {
    // Getting and setting shortcuts
    getShortcutKeys() {
      return e.getState().shortcuts;
    },
    getDefaultShortcuts() {
      return {
        ...we,
        ...n.getAddonsShortcutDefaults()
      };
    },
    getAddonsShortcuts() {
      return Lr;
    },
    getAddonsShortcutLabels() {
      let l = {};
      return Object.entries(n.getAddonsShortcuts()).forEach(([s, { label: u }]) => {
        l[s] = u;
      }), l;
    },
    getAddonsShortcutDefaults() {
      let l = {};
      return Object.entries(n.getAddonsShortcuts()).forEach(([s, { defaultShortcut: u }]) => {
        l[s] = u;
      }), l;
    },
    async setShortcuts(l) {
      return await e.setState({ shortcuts: l }, { persistence: "permanent" }), l;
    },
    async restoreAllDefaultShortcuts() {
      return n.setShortcuts(n.getDefaultShortcuts());
    },
    async setShortcut(l, s) {
      let u = n.getShortcutKeys();
      return await n.setShortcuts({ ...u, [l]: s }), s;
    },
    async setAddonShortcut(l, s) {
      let u = n.getShortcutKeys();
      return await n.setShortcuts({
        ...u,
        [`${l}-${s.actionName}`]: s.defaultShortcut
      }), Lr[`${l}-${s.actionName}`] = s, s;
    },
    async restoreDefaultShortcut(l) {
      let s = n.getDefaultShortcuts()[l];
      return n.setShortcut(l, s);
    },
    // Listening to shortcut events
    handleKeydownEvent(l) {
      let s = zr(l), u = n.getShortcutKeys(), h = Tr(u).find(
        (v) => Hr(s, u[v])
      );
      h && n.handleShortcutFeature(h, l);
    },
    // warning: event might not have a full prototype chain because it may originate from the channel
    handleShortcutFeature(l, s) {
      let {
        ui: { enableShortcuts: u },
        storyId: d
      } = e.getState();
      if (u)
        switch (s?.preventDefault && s.preventDefault(), l) {
          case "escape": {
            t.getIsFullscreen() ? t.toggleFullscreen(!1) : t.getIsNavShown() && t.toggleNav(!0);
            break;
          }
          case "focusNav": {
            t.getIsFullscreen() && t.toggleFullscreen(!1), t.getIsNavShown() || t.toggleNav(!0), t.focusOnUIElement(Fe.storyListMenu);
            break;
          }
          case "search": {
            t.getIsFullscreen() && t.toggleFullscreen(!1), t.getIsNavShown() || t.toggleNav(!0), setTimeout(() => {
              t.focusOnUIElement(Fe.storySearchField, !0);
            }, 0);
            break;
          }
          case "focusIframe": {
            let h = Oi.getElementById("storybook-preview-iframe");
            if (h)
              try {
                h.contentWindow.focus();
              } catch {
              }
            break;
          }
          case "focusPanel": {
            t.getIsFullscreen() && t.toggleFullscreen(!1), t.getIsPanelShown() || t.togglePanel(!0), t.focusOnUIElement(Fe.storyPanelRoot);
            break;
          }
          case "nextStory": {
            t.jumpToStory(1);
            break;
          }
          case "prevStory": {
            t.jumpToStory(-1);
            break;
          }
          case "nextComponent": {
            t.jumpToComponent(1);
            break;
          }
          case "prevComponent": {
            t.jumpToComponent(-1);
            break;
          }
          case "fullScreen": {
            t.toggleFullscreen();
            break;
          }
          case "togglePanel": {
            t.togglePanel();
            break;
          }
          case "toggleNav": {
            t.toggleNav();
            break;
          }
          case "toolbar": {
            t.toggleToolbar();
            break;
          }
          case "panelPosition": {
            t.getIsFullscreen() && t.toggleFullscreen(!1), t.getIsPanelShown() || t.togglePanel(!0), t.togglePanelPosition();
            break;
          }
          case "aboutPage": {
            t.navigate("/settings/about");
            break;
          }
          case "shortcutsPage": {
            t.navigate("/settings/shortcuts");
            break;
          }
          case "collapseAll": {
            t.emit(sp);
            break;
          }
          case "expandAll": {
            t.emit(cp);
            break;
          }
          case "remount": {
            t.emit(ip, { storyId: d });
            break;
          }
          default:
            Lr[l].action();
            break;
        }
    }
  }, { shortcuts: o = we } = e.getState(), i = {
    // Any saved shortcuts that are still in our set of defaults
    shortcuts: Tr(we).reduce(
      (l, s) => ({ ...l, [s]: o[s] || we[s] }),
      we
    )
  };
  return { api: n, state: i, init: /* @__PURE__ */ a(() => {
    Oi.addEventListener("keydown", (l) => {
      fp(l) || n.handleKeydownEvent(l);
    }), r.channel?.on(lp, (l) => {
      n.handleKeydownEvent(l.event);
    });
  }, "initModule") };
}, "init");

// src/manager-api/modules/stories.ts
var Vr = {};
B(Vr, {
  init: () => Lp
});
import { sanitize as Ti, toId as St } from "@storybook/csf";
import { logger as dp } from "@storybook/core/client-logger";
import {
  CONFIG_ERROR as hp,
  CURRENT_STORY_WAS_SET as pp,
  DOCS_PREPARED as vp,
  PRELOAD_ENTRIES as gp,
  RESET_STORY_ARGS as mp,
  SELECT_STORY as wp,
  SET_CONFIG as yp,
  SET_CURRENT_STORY as Rp,
  SET_FILTER as Sp,
  SET_INDEX as Ip,
  SET_STORIES as xp,
  STORY_ARGS_UPDATED as Ap,
  STORY_CHANGED as Ep,
  STORY_INDEX_INVALIDATED as _p,
  STORY_MISSING as bp,
  STORY_PREPARED as Pp,
  STORY_SPECIFIED as Mp,
  UPDATE_STORY_ARGS as Cp
} from "@storybook/core/core-events";
var { fetch: zp } = b, Hp = "./index.json", Op = ["enableShortcuts", "theme", "showRoots"];
function qr(e) {
  if (!e || typeof e == "string")
    return e;
  let t = { ...e };
  return Op.forEach((r) => {
    r in t && delete t[r];
  }), t;
}
a(qr, "removeRemovedOptions");
var Lp = /* @__PURE__ */ a(({
  fullAPI: e,
  store: t,
  navigate: r,
  provider: n,
  storyId: o,
  viewMode: i,
  docsOptions: c = {}
}) => {
  let l = {
    storyId: St,
    getData: /* @__PURE__ */ a((u, d) => {
      let h = l.resolveStory(u, d);
      if (h?.type === "story" || h?.type === "docs")
        return h;
    }, "getData"),
    isPrepared: /* @__PURE__ */ a((u, d) => {
      let h = l.getData(u, d);
      return h ? h.type === "story" ? h.prepared : !0 : !1;
    }, "isPrepared"),
    resolveStory: /* @__PURE__ */ a((u, d) => {
      let { refs: h, index: v } = t.getState();
      if (!(d && !h[d]))
        return d ? h[d].index ? h[d].index[u] : void 0 : v ? v[u] : void 0;
    }, "resolveStory"),
    getCurrentStoryData: /* @__PURE__ */ a(() => {
      let { storyId: u, refId: d } = t.getState();
      return l.getData(u, d);
    }, "getCurrentStoryData"),
    getParameters: /* @__PURE__ */ a((u, d) => {
      let { storyId: h, refId: v } = typeof u == "string" ? { storyId: u, refId: void 0 } : u, g = l.getData(h, v);
      if (["story", "docs"].includes(g?.type)) {
        let { parameters: m } = g;
        if (m)
          return d ? m[d] : m;
      }
      return null;
    }, "getParameters"),
    getCurrentParameter: /* @__PURE__ */ a((u) => {
      let { storyId: d, refId: h } = t.getState();
      return l.getParameters({ storyId: d, refId: h }, u) || void 0;
    }, "getCurrentParameter"),
    jumpToComponent: /* @__PURE__ */ a((u) => {
      let { index: d, storyId: h, refs: v, refId: g } = t.getState();
      if (!l.getData(h, g))
        return;
      let w = g ? v[g].index || {} : d;
      if (!w)
        return;
      let y = l.findSiblingStoryId(h, w, u, !0);
      y && l.selectStory(y, void 0, { ref: g });
    }, "jumpToComponent"),
    jumpToStory: /* @__PURE__ */ a((u) => {
      let { index: d, storyId: h, refs: v, refId: g } = t.getState(), m = l.getData(h, g);
      if (!m)
        return;
      let w = m.refId ? v[m.refId].index : d;
      if (!w)
        return;
      let y = l.findSiblingStoryId(h, w, u, !1);
      y && l.selectStory(y, void 0, { ref: g });
    }, "jumpToStory"),
    selectFirstStory: /* @__PURE__ */ a(() => {
      let { index: u } = t.getState();
      if (!u)
        return;
      let d = Object.keys(u).find((h) => u[h].type === "story");
      if (d) {
        l.selectStory(d);
        return;
      }
      r("/");
    }, "selectFirstStory"),
    selectStory: /* @__PURE__ */ a((u = void 0, d = void 0, h = {}) => {
      let { ref: v } = h, { storyId: g, index: m, refs: w } = t.getState(), y = v ? w[v].index : m, R = g?.split("--", 2)[0];
      if (y)
        if (d)
          if (u) {
            let S = v ? `${v}_${St(u, d)}` : St(u, d);
            if (y[S])
              l.selectStory(S, void 0, h);
            else {
              let A = y[Ti(u)];
              if (A?.type === "component") {
                let x = A.children.find((I) => y[I].name === d);
                x && l.selectStory(x, void 0, h);
              }
            }
          } else {
            let S = St(R, d);
            l.selectStory(S, void 0, h);
          }
        else {
          let S = u ? y[u] || y[Ti(u)] : y[R];
          if (!S)
            throw new Error(`Unknown id or title: '${u}'`);
          t.setState({
            settings: { ...t.getState().settings, lastTrackedStoryId: S.id }
          });
          let A = l.findLeafEntry(y, S.id), x = A.refId ? `${A.refId}_${A.id}` : A.id;
          r(`/${A.type}/${x}`);
        }
    }, "selectStory"),
    findLeafEntry(u, d) {
      let h = u[d];
      if (h.type === "docs" || h.type === "story")
        return h;
      let v = h.children[0];
      return l.findLeafEntry(u, v);
    },
    findLeafStoryId(u, d) {
      return l.findLeafEntry(u, d)?.id;
    },
    findSiblingStoryId(u, d, h, v) {
      if (v) {
        let w = ri(d), y = w.findIndex((R) => R.includes(u));
        return y === w.length - 1 && h > 0 || y === 0 && h < 0 ? void 0 : w[y + h] ? w[y + h][0] : void 0;
      }
      let g = ai(d), m = g.indexOf(u);
      if (!(m === g.length - 1 && h > 0) && !(m === 0 && h < 0))
        return g[m + h];
    },
    updateStoryArgs: /* @__PURE__ */ a((u, d) => {
      let { id: h, refId: v } = u;
      n.channel?.emit(Cp, {
        storyId: h,
        updatedArgs: d,
        options: { target: v }
      });
    }, "updateStoryArgs"),
    resetStoryArgs: /* @__PURE__ */ a((u, d) => {
      let { id: h, refId: v } = u;
      n.channel?.emit(mp, {
        storyId: h,
        argNames: d,
        options: { target: v }
      });
    }, "resetStoryArgs"),
    fetchIndex: /* @__PURE__ */ a(async () => {
      try {
        let u = await zp(Hp);
        if (u.status !== 200)
          throw new Error(await u.text());
        let d = await u.json();
        if (d.v < 3) {
          dp.warn(`Skipping story index with version v${d.v}, awaiting SET_STORIES.`);
          return;
        }
        await l.setIndex(d);
      } catch (u) {
        await t.setState({ indexError: u });
      }
    }, "fetchIndex"),
    // The story index we receive on SET_INDEX is "prepared" in that it has parameters
    // The story index we receive on fetchStoryIndex is not, but all the prepared fields are optional
    // so we can cast one to the other easily enough
    setIndex: /* @__PURE__ */ a(async (u) => {
      let { index: d, status: h, filters: v } = t.getState(), g = wt(u, {
        provider: n,
        docsOptions: c,
        status: h,
        filters: v
      }), m = ti(g, d);
      await t.setState({ internal_index: u, index: m, indexError: void 0 });
    }, "setIndex"),
    updateStory: /* @__PURE__ */ a(async (u, d, h) => {
      if (h) {
        let { id: v, index: g } = h;
        g[u] = {
          ...g[u],
          ...d
        }, await e.updateRef(v, { index: g });
      } else {
        let { index: v } = t.getState();
        if (!v)
          return;
        v[u] = {
          ...v[u],
          ...d
        }, await t.setState({ index: v });
      }
    }, "updateStory"),
    updateDocs: /* @__PURE__ */ a(async (u, d, h) => {
      if (h) {
        let { id: v, index: g } = h;
        g[u] = {
          ...g[u],
          ...d
        }, await e.updateRef(v, { index: g });
      } else {
        let { index: v } = t.getState();
        if (!v)
          return;
        v[u] = {
          ...v[u],
          ...d
        }, await t.setState({ index: v });
      }
    }, "updateDocs"),
    setPreviewInitialized: /* @__PURE__ */ a(async (u) => {
      u ? e.updateRef(u.id, { previewInitialized: !0 }) : t.setState({ previewInitialized: !0 });
    }, "setPreviewInitialized"),
    /* EXPERIMENTAL APIs */
    experimental_updateStatus: /* @__PURE__ */ a(async (u, d) => {
      let { status: h, internal_index: v } = t.getState(), g = { ...h }, m = typeof d == "function" ? d(h) : d;
      if (!(!u || Object.keys(m).length === 0) && (Object.entries(m).forEach(([w, y]) => {
        !w || typeof y != "object" || (g[w] = { ...g[w] || {} }, y === null ? delete g[w][u] : g[w][u] = y, Object.keys(g[w]).length === 0 &&
        delete g[w]);
      }), await t.setState({ status: g }, { persistence: "session" }), v)) {
        await l.setIndex(v);
        let w = await e.getRefs();
        Object.entries(w).forEach(([y, { internal_index: R, ...S }]) => {
          e.setRef(y, { ...S, storyIndex: R }, !0);
        });
      }
    }, "experimental_updateStatus"),
    experimental_setFilter: /* @__PURE__ */ a(async (u, d) => {
      await t.setState({ filters: { ...t.getState().filters, [u]: d } });
      let { internal_index: h } = t.getState();
      if (!h)
        return;
      await l.setIndex(h);
      let v = await e.getRefs();
      Object.entries(v).forEach(([g, { internal_index: m, ...w }]) => {
        e.setRef(g, { ...w, storyIndex: m }, !0);
      }), n.channel?.emit(Sp, { id: u });
    }, "experimental_setFilter")
  };
  n.channel?.on(
    Mp,
    /* @__PURE__ */ a(function({
      storyId: d,
      viewMode: h
    }) {
      let { sourceType: v } = L(this, e);
      if (v === "local") {
        let g = t.getState(), m = g.path === "/" || g.viewMode === "story" || g.viewMode === "docs", w = g.viewMode && g.storyId, y = g.viewMode !==
        h || g.storyId !== d, { type: R } = g.index?.[g.storyId] || {};
        m && (w && y && !(R === "root" || R === "component" || R === "group") ? n.channel?.emit(Rp, {
          storyId: g.storyId,
          viewMode: g.viewMode
        }) : y && r(`/${h}/${d}`));
      }
    }, "handler")
  ), n.channel?.on(pp, /* @__PURE__ */ a(function() {
    let { ref: d } = L(this, e);
    l.setPreviewInitialized(d);
  }, "handler")), n.channel?.on(Ep, /* @__PURE__ */ a(function() {
    let { sourceType: d } = L(this, e);
    if (d === "local") {
      let h = l.getCurrentParameter("options");
      h && e.setOptions(qr(h));
    }
  }, "handler")), n.channel?.on(
    Pp,
    /* @__PURE__ */ a(function({ id: d, ...h }) {
      let { ref: v, sourceType: g } = L(this, e);
      if (l.updateStory(d, { ...h, prepared: !0 }, v), !v && !t.getState().hasCalledSetOptions) {
        let { options: m } = h.parameters;
        e.setOptions(qr(m)), t.setState({ hasCalledSetOptions: !0 });
      }
      if (g === "local") {
        let { storyId: m, index: w, refId: y } = t.getState();
        if (!w)
          return;
        let R = Array.from(
          /* @__PURE__ */ new Set([
            l.findSiblingStoryId(m, w, 1, !0),
            l.findSiblingStoryId(m, w, -1, !0)
          ])
        ).filter(Boolean);
        n.channel?.emit(gp, {
          ids: R,
          options: { target: y }
        });
      }
    }, "handler")
  ), n.channel?.on(
    vp,
    /* @__PURE__ */ a(function({ id: d, ...h }) {
      let { ref: v } = L(this, e);
      l.updateStory(d, { ...h, prepared: !0 }, v);
    }, "handler")
  ), n.channel?.on(Ip, /* @__PURE__ */ a(function(d) {
    let { ref: h } = L(this, e);
    if (h)
      e.setRef(h.id, { ...h, storyIndex: d }, !0);
    else {
      l.setIndex(d);
      let v = l.getCurrentParameter("options");
      e.setOptions(qr(v));
    }
  }, "handler")), n.channel?.on(xp, /* @__PURE__ */ a(function(d) {
    let { ref: h } = L(this, e), v = d.v ? Z5(d) : d.stories;
    if (h)
      e.setRef(h.id, { ...h, setStoriesData: v }, !0);
    else
      throw new Error("Cannot call SET_STORIES for local frame");
  }, "handler")), n.channel?.on(
    wp,
    /* @__PURE__ */ a(function({
      kind: d,
      title: h = d,
      story: v,
      name: g = v,
      storyId: m,
      ...w
    }) {
      let { ref: y } = L(this, e);
      y ? e.selectStory(m || h, g, { ...w, ref: y.id }) : e.selectStory(m || h, g, w);
    }, "handler")
  ), n.channel?.on(
    Ap,
    /* @__PURE__ */ a(function({ storyId: d, args: h }) {
      let { ref: v } = L(this, e);
      l.updateStory(d, { args: h }, v);
    }, "handleStoryArgsUpdated")
  ), n.channel?.on(hp, /* @__PURE__ */ a(function(d) {
    let { ref: h } = L(this, e);
    l.setPreviewInitialized(h);
  }, "handleConfigError")), n.channel?.on(bp, /* @__PURE__ */ a(function(d) {
    let { ref: h } = L(this, e);
    l.setPreviewInitialized(h);
  }, "handleConfigError")), n.channel?.on(yp, () => {
    let u = n.getConfig();
    u?.sidebar?.filters && t.setState({
      filters: {
        ...t.getState().filters,
        ...u?.sidebar?.filters
      }
    });
  });
  let s = n.getConfig();
  return {
    api: l,
    state: {
      storyId: o,
      viewMode: i,
      hasCalledSetOptions: !1,
      previewInitialized: !1,
      status: {},
      filters: s?.sidebar?.filters || {}
    },
    init: /* @__PURE__ */ a(async () => {
      n.channel?.on(_p, () => l.fetchIndex()), await l.fetchIndex();
    }, "init")
  };
}, "init");

// src/manager-api/modules/url.ts
var jr = {};
B(jr, {
  init: () => Fp
});
import { buildArgsParam as Bi, queryFromLocation as Tp } from "@storybook/core/router";
import {
  GLOBALS_UPDATED as Bp,
  NAVIGATE_URL as qp,
  SET_CURRENT_STORY as Vp,
  STORY_ARGS_UPDATED as Dp,
  UPDATE_QUERY_PARAMS as Np
} from "@storybook/core/core-events";
var { window: Dr } = b, te = /* @__PURE__ */ a((e) => {
  if (e === "true" || e === "1")
    return !0;
  if (e === "false" || e === "0")
    return !1;
}, "parseBoolean"), Nr, jp = /* @__PURE__ */ a(({
  state: { location: e, path: t, viewMode: r, storyId: n },
  singleStory: o
}) => {
  let {
    full: i,
    panel: c,
    nav: l,
    shortcuts: s,
    addonPanel: u,
    tabs: d,
    path: h,
    ...v
    // the rest gets passed to the iframe
  } = Tp(e), g, m, w;
  te(i) === !0 ? (g = 0, m = 0, w = 0) : te(i) === !1 && (g = q.layout.navSize, m = q.layout.bottomPanelHeight, w = q.layout.rightPanelWidth),
  o || (te(l) === !0 && (g = q.layout.navSize), te(l) === !1 && (g = 0)), te(c) === !1 && (m = 0, w = 0);
  let y = {
    navSize: g,
    bottomPanelHeight: m,
    rightPanelWidth: w,
    panelPosition: ["right", "bottom"].includes(c) ? c : void 0,
    showTabs: te(d)
  }, R = {
    enableShortcuts: te(s)
  }, S = u || void 0, A = n, x = z(Nr, v) ? Nr : v;
  return Nr = x, { viewMode: r, layout: y, ui: R, selectedPanel: S, location: e, path: t, customQueryParams: x, storyId: A };
}, "initialUrlSupport"), Fp = /* @__PURE__ */ a((e) => {
  let { store: t, navigate: r, provider: n, fullAPI: o } = e, i = /* @__PURE__ */ a((u, d = {}, h = {}) => {
    let v = Object.entries(d).filter(([, m]) => m).sort(([m], [w]) => m < w ? -1 : 1).map(([m, w]) => `${m}=${w}`), g = [u, ...v].join("&");
    return r(g, h);
  }, "navigateTo"), c = {
    getQueryParam(u) {
      let { customQueryParams: d } = t.getState();
      return d ? d[u] : void 0;
    },
    getUrlState() {
      let { path: u, customQueryParams: d, storyId: h, url: v, viewMode: g } = t.getState();
      return { path: u, queryParams: d, storyId: h, url: v, viewMode: g };
    },
    setQueryParams(u) {
      let { customQueryParams: d } = t.getState(), h = {}, v = {
        ...d,
        ...Object.entries(u).reduce((g, [m, w]) => (w !== null && (g[m] = w), g), h)
      };
      z(d, v) || (t.setState({ customQueryParams: v }), n.channel?.emit(Np, v));
    },
    applyQueryParams(u) {
      let { path: d, queryParams: h } = c.getUrlState();
      i(d, { ...h, ...u }), c.setQueryParams(u);
    },
    navigateUrl(u, d) {
      r(u, { plain: !0, ...d });
    }
  }, l = /* @__PURE__ */ a(() => {
    let { path: u, queryParams: d, viewMode: h } = c.getUrlState();
    if (h !== "story")
      return;
    let v = o.getCurrentStoryData();
    if (v?.type !== "story")
      return;
    let { args: g, initialArgs: m } = v, w = Bi(m, g);
    i(u, { ...d, args: w }, { replace: !0 }), c.setQueryParams({ args: w });
  }, "updateArgsParam");
  n.channel?.on(Vp, () => l());
  let s;
  return n.channel?.on(Dp, () => {
    "requestIdleCallback" in Dr ? (s && Dr.cancelIdleCallback(s), s = Dr.requestIdleCallback(l, { timeout: 1e3 })) : (s && clearTimeout(s), setTimeout(
    l, 100));
  }), n.channel?.on(Bp, ({ userGlobals: u, initialGlobals: d }) => {
    let { path: h, queryParams: v } = c.getUrlState(), g = Bi(d, u);
    i(h, { ...v, globals: g }, { replace: !0 }), c.setQueryParams({ globals: g });
  }), n.channel?.on(qp, (u, d) => {
    c.navigateUrl(u, d);
  }), {
    api: c,
    state: jp(e)
  };
}, "init");

// src/manager-api/modules/versions.ts
var Fr = {};
B(Fr, {
  init: () => kp
});
var Di = j(mt(), 1);
import G from "semver";

// src/manager-api/version.ts
var qi = "8.3.6";

// src/manager-api/modules/versions.ts
var { VERSIONCHECK: Gp } = b, Vi = (0, Di.default)(1)(() => {
  try {
    return { ...JSON.parse(Gp).data || {} };
  } catch {
    return {};
  }
}), Up = /* @__PURE__ */ a((e) => e.includes("vue") ? "vue" : e, "normalizeRendererName"), kp = /* @__PURE__ */ a(({ store: e }) => {
  let { dismissedVersionNotification: t } = e.getState(), r = {
    versions: {
      current: {
        version: qi
      },
      ...Vi()
    },
    dismissedVersionNotification: t
  }, n = {
    getCurrentVersion: /* @__PURE__ */ a(() => {
      let {
        versions: { current: i }
      } = e.getState();
      return i;
    }, "getCurrentVersion"),
    getLatestVersion: /* @__PURE__ */ a(() => {
      let {
        versions: { latest: i, next: c, current: l }
      } = e.getState();
      return l && G.prerelease(l.version) && c ? i && G.gt(i.version, c.version) ? i : c : i;
    }, "getLatestVersion"),
    // TODO: Move this to it's own "info" module later
    getDocsUrl: /* @__PURE__ */ a(({ subpath: i, versioned: c, renderer: l }) => {
      let {
        versions: { latest: s, current: u }
      } = e.getState(), d = "https://storybook.js.org/docs/";
      if (c && u?.version && s?.version) {
        let h = G.diff(s.version, u.version);
        h === "patch" || h === null || (d += `${G.major(u.version)}.${G.minor(u.version)}/`);
      }
      if (i && (d += `${i}/`), l && typeof b.STORYBOOK_RENDERER < "u") {
        let h = b.STORYBOOK_RENDERER;
        h && (d += `?renderer=${Up(h)}`);
      }
      return d;
    }, "getDocsUrl"),
    versionUpdateAvailable: /* @__PURE__ */ a(() => {
      let i = n.getLatestVersion(), c = n.getCurrentVersion();
      if (i) {
        if (!i.version || !c.version)
          return !0;
        let s = !!G.prerelease(c.version) ? `${G.major(c.version)}.${G.minor(c.version)}.${G.patch(
          c.version
        )}` : c.version, u = G.diff(s, i.version);
        return G.gt(i.version, s) && u !== "patch" && !u.includes("pre");
      }
      return !1;
    }, "versionUpdateAvailable")
  };
  return { init: /* @__PURE__ */ a(async () => {
    let { versions: i = {} } = e.getState(), { latest: c, next: l } = Vi();
    await e.setState({
      versions: { ...i, latest: c, next: l }
    });
  }, "initModule"), state: r, api: n };
}, "init");

// src/manager-api/modules/whatsnew.tsx
var Gr = {};
B(Gr, {
  init: () => Qp
});
import $p from "react";

// ../node_modules/@storybook/icons/dist/index.mjs
import * as Ge from "react";
var Ni = /* @__PURE__ */ Ge.forwardRef(({ color: e = "currentColor", size: t = 14, ...r }, n) => /* @__PURE__ */ Ge.createElement(
  "svg",
  {
    width: t,
    height: t,
    viewBox: "0 0 14 14",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    ref: n,
    ...r
  },
  /* @__PURE__ */ Ge.createElement(
    "path",
    {
      fillRule: "evenodd",
      clipRule: "evenodd",
      d: "M2.042.616a.704.704 0 00-.66.729L1.816 12.9c.014.367.306.66.672.677l9.395.422h.032a.704.704 0 00.704-.703V.704c0-.015 0-.03-.002-.\
044a.704.704 0 00-.746-.659l-.773.049.057 1.615a.105.105 0 01-.17.086l-.52-.41-.617.468a.105.105 0 01-.168-.088L9.746.134 2.042.616zm8.003 4\
.747c-.247.192-2.092.324-2.092.05.04-1.045-.429-1.091-.689-1.091-.247 0-.662.075-.662.634 0 .57.607.893 1.32 1.27 1.014.538 2.24 1.188 2.24 \
2.823 0 1.568-1.273 2.433-2.898 2.433-1.676 0-3.141-.678-2.976-3.03.065-.275 2.197-.21 2.197 0-.026.971.195 1.256.753 1.256.43 0 .624-.236.6\
24-.634 0-.602-.633-.958-1.361-1.367-.987-.554-2.148-1.205-2.148-2.7 0-1.494 1.027-2.489 2.86-2.489 1.832 0 2.832.98 2.832 2.845z",
      fill: e
    }
  )
));

// src/manager-api/modules/whatsnew.tsx
import {
  REQUEST_WHATS_NEW_DATA as Kp,
  RESULT_WHATS_NEW_DATA as Wp,
  SET_WHATS_NEW_CACHE as Yp,
  TOGGLE_WHATS_NEW_NOTIFICATIONS as Jp
} from "@storybook/core/core-events";
var ji = "whats-new", Qp = /* @__PURE__ */ a(({ fullAPI: e, store: t, provider: r }) => {
  let n = {
    whatsNewData: void 0
  };
  function o(u) {
    t.setState({ whatsNewData: u }), n.whatsNewData = u;
  }
  a(o, "setWhatsNewState");
  let i = {
    isWhatsNewUnread() {
      return n.whatsNewData?.status === "SUCCESS" && !n.whatsNewData.postIsRead;
    },
    whatsNewHasBeenRead() {
      n.whatsNewData?.status === "SUCCESS" && (l({ lastReadPost: n.whatsNewData.url }), o({ ...n.whatsNewData, postIsRead: !0 }), e.clearNotification(
      ji));
    },
    toggleWhatsNewNotifications() {
      n.whatsNewData?.status === "SUCCESS" && (o({
        ...n.whatsNewData,
        disableWhatsNewNotifications: !n.whatsNewData.disableWhatsNewNotifications
      }), r.channel?.emit(Jp, {
        disableWhatsNewNotifications: n.whatsNewData.disableWhatsNewNotifications
      }));
    }
  };
  function c() {
    return r.channel?.emit(Kp), new Promise(
      (u) => r.channel?.once(
        Wp,
        ({ data: d }) => u(d)
      )
    );
  }
  a(c, "getLatestWhatsNewPost");
  function l(u) {
    r.channel?.emit(Yp, u);
  }
  return a(l, "setWhatsNewCache"), { init: /* @__PURE__ */ a(async () => {
    if (b.CONFIG_TYPE !== "DEVELOPMENT")
      return;
    let u = await c();
    o(u);
    let d = e.getUrlState();
    !(d?.path === "/onboarding" || d.queryParams?.onboarding === "true") && u.status === "SUCCESS" && !u.disableWhatsNewNotifications && u.showNotification &&
    e.addNotification({
      id: ji,
      link: "/settings/whats-new",
      content: {
        headline: u.title,
        subHeadline: "Learn what's new in Storybook"
      },
      icon: /* @__PURE__ */ $p.createElement(Ni, null),
      onClear({ dismissed: v }) {
        v && l({ lastDismissedPost: u.url });
      }
    });
  }, "initModule"), state: n, api: i };
}, "init");

// src/manager-api/store.ts
var xe = j(Fi(), 1);

// ../node_modules/telejson/dist/chunk-465TF3XA.mjs
var Xp = Object.create, Gi = Object.defineProperty, Zp = Object.getOwnPropertyDescriptor, Ui = Object.getOwnPropertyNames, e6 = Object.getPrototypeOf,
t6 = Object.prototype.hasOwnProperty, V = /* @__PURE__ */ a((e, t) => /* @__PURE__ */ a(function() {
  return t || (0, e[Ui(e)[0]])((t = { exports: {} }).exports, t), t.exports;
}, "__require"), "__commonJS"), r6 = /* @__PURE__ */ a((e, t, r, n) => {
  if (t && typeof t == "object" || typeof t == "function")
    for (let o of Ui(t))
      !t6.call(e, o) && o !== r && Gi(e, o, { get: /* @__PURE__ */ a(() => t[o], "get"), enumerable: !(n = Zp(t, o)) || n.enumerable });
  return e;
}, "__copyProps"), At = /* @__PURE__ */ a((e, t, r) => (r = e != null ? Xp(e6(e)) : {}, r6(
  t || !e || !e.__esModule ? Gi(r, "default", { value: e, enumerable: !0 }) : r,
  e
)), "__toESM"), a6 = [
  "bubbles",
  "cancelBubble",
  "cancelable",
  "composed",
  "currentTarget",
  "defaultPrevented",
  "eventPhase",
  "isTrusted",
  "returnValue",
  "srcElement",
  "target",
  "timeStamp",
  "type"
], n6 = ["detail"];
function ki(e) {
  let t = a6.filter((r) => e[r] !== void 0).reduce((r, n) => ({ ...r, [n]: e[n] }), {});
  return e instanceof CustomEvent && n6.filter((r) => e[r] !== void 0).forEach((r) => {
    t[r] = e[r];
  }), t;
}
a(ki, "extractEventHiddenProperties");

// ../node_modules/telejson/dist/index.mjs
var il = j(mt(), 1);
var Qi = V({
  "node_modules/has-symbols/shams.js"(e, t) {
    "use strict";
    t.exports = /* @__PURE__ */ a(function() {
      if (typeof Symbol != "function" || typeof Object.getOwnPropertySymbols != "function")
        return !1;
      if (typeof Symbol.iterator == "symbol")
        return !0;
      var n = {}, o = Symbol("test"), i = Object(o);
      if (typeof o == "string" || Object.prototype.toString.call(o) !== "[object Symbol]" || Object.prototype.toString.call(i) !== "[object \
Symbol]")
        return !1;
      var c = 42;
      n[o] = c;
      for (o in n)
        return !1;
      if (typeof Object.keys == "function" && Object.keys(n).length !== 0 || typeof Object.getOwnPropertyNames == "function" && Object.getOwnPropertyNames(
      n).length !== 0)
        return !1;
      var l = Object.getOwnPropertySymbols(n);
      if (l.length !== 1 || l[0] !== o || !Object.prototype.propertyIsEnumerable.call(n, o))
        return !1;
      if (typeof Object.getOwnPropertyDescriptor == "function") {
        var s = Object.getOwnPropertyDescriptor(n, o);
        if (s.value !== c || s.enumerable !== !0)
          return !1;
      }
      return !0;
    }, "hasSymbols");
  }
}), Xi = V({
  "node_modules/has-symbols/index.js"(e, t) {
    "use strict";
    var r = typeof Symbol < "u" && Symbol, n = Qi();
    t.exports = /* @__PURE__ */ a(function() {
      return typeof r != "function" || typeof Symbol != "function" || typeof r("foo") != "symbol" || typeof Symbol("bar") != "symbol" ? !1 :
      n();
    }, "hasNativeSymbols");
  }
}), o6 = V({
  "node_modules/function-bind/implementation.js"(e, t) {
    "use strict";
    var r = "Function.prototype.bind called on incompatible ", n = Array.prototype.slice, o = Object.prototype.toString, i = "[object Functi\
on]";
    t.exports = /* @__PURE__ */ a(function(l) {
      var s = this;
      if (typeof s != "function" || o.call(s) !== i)
        throw new TypeError(r + s);
      for (var u = n.call(arguments, 1), d, h = /* @__PURE__ */ a(function() {
        if (this instanceof d) {
          var y = s.apply(
            this,
            u.concat(n.call(arguments))
          );
          return Object(y) === y ? y : this;
        } else
          return s.apply(
            l,
            u.concat(n.call(arguments))
          );
      }, "binder"), v = Math.max(0, s.length - u.length), g = [], m = 0; m < v; m++)
        g.push("$" + m);
      if (d = Function("binder", "return function (" + g.join(",") + "){ return binder.apply(this,arguments); }")(h), s.prototype) {
        var w = /* @__PURE__ */ a(function() {
        }, "Empty2");
        w.prototype = s.prototype, d.prototype = new w(), w.prototype = null;
      }
      return d;
    }, "bind");
  }
}), kr = V({
  "node_modules/function-bind/index.js"(e, t) {
    "use strict";
    var r = o6();
    t.exports = Function.prototype.bind || r;
  }
}), i6 = V({
  "node_modules/has/src/index.js"(e, t) {
    "use strict";
    var r = kr();
    t.exports = r.call(Function.call, Object.prototype.hasOwnProperty);
  }
}), Zi = V({
  "node_modules/get-intrinsic/index.js"(e, t) {
    "use strict";
    var r, n = SyntaxError, o = Function, i = TypeError, c = /* @__PURE__ */ a(function(N) {
      try {
        return o('"use strict"; return (' + N + ").constructor;")();
      } catch {
      }
    }, "getEvalledConstructor"), l = Object.getOwnPropertyDescriptor;
    if (l)
      try {
        l({}, "");
      } catch {
        l = null;
      }
    var s = /* @__PURE__ */ a(function() {
      throw new i();
    }, "throwTypeError"), u = l ? function() {
      try {
        return arguments.callee, s;
      } catch {
        try {
          return l(arguments, "callee").get;
        } catch {
          return s;
        }
      }
    }() : s, d = Xi()(), h = Object.getPrototypeOf || function(N) {
      return N.__proto__;
    }, v = {}, g = typeof Uint8Array > "u" ? r : h(Uint8Array), m = {
      "%AggregateError%": typeof AggregateError > "u" ? r : AggregateError,
      "%Array%": Array,
      "%ArrayBuffer%": typeof ArrayBuffer > "u" ? r : ArrayBuffer,
      "%ArrayIteratorPrototype%": d ? h([][Symbol.iterator]()) : r,
      "%AsyncFromSyncIteratorPrototype%": r,
      "%AsyncFunction%": v,
      "%AsyncGenerator%": v,
      "%AsyncGeneratorFunction%": v,
      "%AsyncIteratorPrototype%": v,
      "%Atomics%": typeof Atomics > "u" ? r : Atomics,
      "%BigInt%": typeof BigInt > "u" ? r : BigInt,
      "%Boolean%": Boolean,
      "%DataView%": typeof DataView > "u" ? r : DataView,
      "%Date%": Date,
      "%decodeURI%": decodeURI,
      "%decodeURIComponent%": decodeURIComponent,
      "%encodeURI%": encodeURI,
      "%encodeURIComponent%": encodeURIComponent,
      "%Error%": Error,
      "%eval%": eval,
      "%EvalError%": EvalError,
      "%Float32Array%": typeof Float32Array > "u" ? r : Float32Array,
      "%Float64Array%": typeof Float64Array > "u" ? r : Float64Array,
      "%FinalizationRegistry%": typeof FinalizationRegistry > "u" ? r : FinalizationRegistry,
      "%Function%": o,
      "%GeneratorFunction%": v,
      "%Int8Array%": typeof Int8Array > "u" ? r : Int8Array,
      "%Int16Array%": typeof Int16Array > "u" ? r : Int16Array,
      "%Int32Array%": typeof Int32Array > "u" ? r : Int32Array,
      "%isFinite%": isFinite,
      "%isNaN%": isNaN,
      "%IteratorPrototype%": d ? h(h([][Symbol.iterator]())) : r,
      "%JSON%": typeof JSON == "object" ? JSON : r,
      "%Map%": typeof Map > "u" ? r : Map,
      "%MapIteratorPrototype%": typeof Map > "u" || !d ? r : h((/* @__PURE__ */ new Map())[Symbol.iterator]()),
      "%Math%": Math,
      "%Number%": Number,
      "%Object%": Object,
      "%parseFloat%": parseFloat,
      "%parseInt%": parseInt,
      "%Promise%": typeof Promise > "u" ? r : Promise,
      "%Proxy%": typeof Proxy > "u" ? r : Proxy,
      "%RangeError%": RangeError,
      "%ReferenceError%": ReferenceError,
      "%Reflect%": typeof Reflect > "u" ? r : Reflect,
      "%RegExp%": RegExp,
      "%Set%": typeof Set > "u" ? r : Set,
      "%SetIteratorPrototype%": typeof Set > "u" || !d ? r : h((/* @__PURE__ */ new Set())[Symbol.iterator]()),
      "%SharedArrayBuffer%": typeof SharedArrayBuffer > "u" ? r : SharedArrayBuffer,
      "%String%": String,
      "%StringIteratorPrototype%": d ? h(""[Symbol.iterator]()) : r,
      "%Symbol%": d ? Symbol : r,
      "%SyntaxError%": n,
      "%ThrowTypeError%": u,
      "%TypedArray%": g,
      "%TypeError%": i,
      "%Uint8Array%": typeof Uint8Array > "u" ? r : Uint8Array,
      "%Uint8ClampedArray%": typeof Uint8ClampedArray > "u" ? r : Uint8ClampedArray,
      "%Uint16Array%": typeof Uint16Array > "u" ? r : Uint16Array,
      "%Uint32Array%": typeof Uint32Array > "u" ? r : Uint32Array,
      "%URIError%": URIError,
      "%WeakMap%": typeof WeakMap > "u" ? r : WeakMap,
      "%WeakRef%": typeof WeakRef > "u" ? r : WeakRef,
      "%WeakSet%": typeof WeakSet > "u" ? r : WeakSet
    }, w = /* @__PURE__ */ a(function N(P) {
      var H;
      if (P === "%AsyncFunction%")
        H = c("async function () {}");
      else if (P === "%GeneratorFunction%")
        H = c("function* () {}");
      else if (P === "%AsyncGeneratorFunction%")
        H = c("async function* () {}");
      else if (P === "%AsyncGenerator%") {
        var M = N("%AsyncGeneratorFunction%");
        M && (H = M.prototype);
      } else if (P === "%AsyncIteratorPrototype%") {
        var O = N("%AsyncGenerator%");
        O && (H = h(O.prototype));
      }
      return m[P] = H, H;
    }, "doEval2"), y = {
      "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
      "%ArrayPrototype%": ["Array", "prototype"],
      "%ArrayProto_entries%": ["Array", "prototype", "entries"],
      "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
      "%ArrayProto_keys%": ["Array", "prototype", "keys"],
      "%ArrayProto_values%": ["Array", "prototype", "values"],
      "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
      "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
      "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"],
      "%BooleanPrototype%": ["Boolean", "prototype"],
      "%DataViewPrototype%": ["DataView", "prototype"],
      "%DatePrototype%": ["Date", "prototype"],
      "%ErrorPrototype%": ["Error", "prototype"],
      "%EvalErrorPrototype%": ["EvalError", "prototype"],
      "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
      "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
      "%FunctionPrototype%": ["Function", "prototype"],
      "%Generator%": ["GeneratorFunction", "prototype"],
      "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"],
      "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
      "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
      "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
      "%JSONParse%": ["JSON", "parse"],
      "%JSONStringify%": ["JSON", "stringify"],
      "%MapPrototype%": ["Map", "prototype"],
      "%NumberPrototype%": ["Number", "prototype"],
      "%ObjectPrototype%": ["Object", "prototype"],
      "%ObjProto_toString%": ["Object", "prototype", "toString"],
      "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
      "%PromisePrototype%": ["Promise", "prototype"],
      "%PromiseProto_then%": ["Promise", "prototype", "then"],
      "%Promise_all%": ["Promise", "all"],
      "%Promise_reject%": ["Promise", "reject"],
      "%Promise_resolve%": ["Promise", "resolve"],
      "%RangeErrorPrototype%": ["RangeError", "prototype"],
      "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
      "%RegExpPrototype%": ["RegExp", "prototype"],
      "%SetPrototype%": ["Set", "prototype"],
      "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
      "%StringPrototype%": ["String", "prototype"],
      "%SymbolPrototype%": ["Symbol", "prototype"],
      "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
      "%TypedArrayPrototype%": ["TypedArray", "prototype"],
      "%TypeErrorPrototype%": ["TypeError", "prototype"],
      "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
      "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
      "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
      "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
      "%URIErrorPrototype%": ["URIError", "prototype"],
      "%WeakMapPrototype%": ["WeakMap", "prototype"],
      "%WeakSetPrototype%": ["WeakSet", "prototype"]
    }, R = kr(), S = i6(), A = R.call(Function.call, Array.prototype.concat), x = R.call(Function.apply, Array.prototype.splice), I = R.call(
    Function.call, String.prototype.replace), E = R.call(Function.call, String.prototype.slice), C = R.call(Function.call, RegExp.prototype.
    exec), U = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g, Ee = /\\(\\)?/g, _e = /* @__PURE__ */ a(
    function(P) {
      var H = E(P, 0, 1), M = E(P, -1);
      if (H === "%" && M !== "%")
        throw new n("invalid intrinsic syntax, expected closing `%`");
      if (M === "%" && H !== "%")
        throw new n("invalid intrinsic syntax, expected opening `%`");
      var O = [];
      return I(P, U, function(k, re, T, We) {
        O[O.length] = T ? I(We, Ee, "$1") : re || k;
      }), O;
    }, "stringToPath3"), Rl = /* @__PURE__ */ a(function(P, H) {
      var M = P, O;
      if (S(y, M) && (O = y[M], M = "%" + O[0] + "%"), S(m, M)) {
        var k = m[M];
        if (k === v && (k = w(M)), typeof k > "u" && !H)
          throw new i("intrinsic " + P + " exists, but is not available. Please file an issue!");
        return {
          alias: O,
          name: M,
          value: k
        };
      }
      throw new n("intrinsic " + P + " does not exist!");
    }, "getBaseIntrinsic2");
    t.exports = /* @__PURE__ */ a(function(P, H) {
      if (typeof P != "string" || P.length === 0)
        throw new i("intrinsic name must be a non-empty string");
      if (arguments.length > 1 && typeof H != "boolean")
        throw new i('"allowMissing" argument must be a boolean');
      if (C(/^%?[^%]*%?$/, P) === null)
        throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
      var M = _e(P), O = M.length > 0 ? M[0] : "", k = Rl("%" + O + "%", H), re = k.name, T = k.value, We = !1, zt = k.alias;
      zt && (O = zt[0], x(M, A([0, 1], zt)));
      for (var Ye = 1, be = !0; Ye < M.length; Ye += 1) {
        var Y = M[Ye], Je = E(Y, 0, 1), Qe = E(Y, -1);
        if ((Je === '"' || Je === "'" || Je === "`" || Qe === '"' || Qe === "'" || Qe === "`") && Je !== Qe)
          throw new n("property names with quotes must have matching quotes");
        if ((Y === "constructor" || !be) && (We = !0), O += "." + Y, re = "%" + O + "%", S(m, re))
          T = m[re];
        else if (T != null) {
          if (!(Y in T)) {
            if (!H)
              throw new i("base intrinsic for " + P + " exists, but the property is not available.");
            return;
          }
          if (l && Ye + 1 >= M.length) {
            var Xe = l(T, Y);
            be = !!Xe, be && "get" in Xe && !("originalValue" in Xe.get) ? T = Xe.get : T = T[Y];
          } else
            be = S(T, Y), T = T[Y];
          be && !We && (m[re] = T);
        }
      }
      return T;
    }, "GetIntrinsic");
  }
}), l6 = V({
  "node_modules/call-bind/index.js"(e, t) {
    "use strict";
    var r = kr(), n = Zi(), o = n("%Function.prototype.apply%"), i = n("%Function.prototype.call%"), c = n("%Reflect.apply%", !0) || r.call(
    i, o), l = n("%Object.getOwnPropertyDescriptor%", !0), s = n("%Object.defineProperty%", !0), u = n("%Math.max%");
    if (s)
      try {
        s({}, "a", { value: 1 });
      } catch {
        s = null;
      }
    t.exports = /* @__PURE__ */ a(function(v) {
      var g = c(r, i, arguments);
      if (l && s) {
        var m = l(g, "length");
        m.configurable && s(
          g,
          "length",
          { value: 1 + u(0, v.length - (arguments.length - 1)) }
        );
      }
      return g;
    }, "callBind");
    var d = /* @__PURE__ */ a(function() {
      return c(r, o, arguments);
    }, "applyBind2");
    s ? s(t.exports, "apply", { value: d }) : t.exports.apply = d;
  }
}), s6 = V({
  "node_modules/call-bind/callBound.js"(e, t) {
    "use strict";
    var r = Zi(), n = l6(), o = n(r("String.prototype.indexOf"));
    t.exports = /* @__PURE__ */ a(function(c, l) {
      var s = r(c, !!l);
      return typeof s == "function" && o(c, ".prototype.") > -1 ? n(s) : s;
    }, "callBoundIntrinsic");
  }
}), c6 = V({
  "node_modules/has-tostringtag/shams.js"(e, t) {
    "use strict";
    var r = Qi();
    t.exports = /* @__PURE__ */ a(function() {
      return r() && !!Symbol.toStringTag;
    }, "hasToStringTagShams");
  }
}), f6 = V({
  "node_modules/is-regex/index.js"(e, t) {
    "use strict";
    var r = s6(), n = c6()(), o, i, c, l;
    n && (o = r("Object.prototype.hasOwnProperty"), i = r("RegExp.prototype.exec"), c = {}, s = /* @__PURE__ */ a(function() {
      throw c;
    }, "throwRegexMarker"), l = {
      toString: s,
      valueOf: s
    }, typeof Symbol.toPrimitive == "symbol" && (l[Symbol.toPrimitive] = s));
    var s, u = r("Object.prototype.toString"), d = Object.getOwnPropertyDescriptor, h = "[object RegExp]";
    t.exports = /* @__PURE__ */ a(n ? function(g) {
      if (!g || typeof g != "object")
        return !1;
      var m = d(g, "lastIndex"), w = m && o(m, "value");
      if (!w)
        return !1;
      try {
        i(g, l);
      } catch (y) {
        return y === c;
      }
    } : function(g) {
      return !g || typeof g != "object" && typeof g != "function" ? !1 : u(g) === h;
    }, "isRegex");
  }
}), u6 = V({
  "node_modules/is-function/index.js"(e, t) {
    t.exports = n;
    var r = Object.prototype.toString;
    function n(o) {
      if (!o)
        return !1;
      var i = r.call(o);
      return i === "[object Function]" || typeof o == "function" && i !== "[object RegExp]" || typeof window < "u" && (o === window.setTimeout ||
      o === window.alert || o === window.confirm || o === window.prompt);
    }
    a(n, "isFunction3");
  }
}), d6 = V({
  "node_modules/is-symbol/index.js"(e, t) {
    "use strict";
    var r = Object.prototype.toString, n = Xi()();
    n ? (o = Symbol.prototype.toString, i = /^Symbol\(.*\)$/, c = /* @__PURE__ */ a(function(s) {
      return typeof s.valueOf() != "symbol" ? !1 : i.test(o.call(s));
    }, "isRealSymbolObject"), t.exports = /* @__PURE__ */ a(function(s) {
      if (typeof s == "symbol")
        return !0;
      if (r.call(s) !== "[object Symbol]")
        return !1;
      try {
        return c(s);
      } catch {
        return !1;
      }
    }, "isSymbol3")) : t.exports = /* @__PURE__ */ a(function(s) {
      return !1;
    }, "isSymbol3");
    var o, i, c;
  }
}), h6 = At(f6()), p6 = At(u6()), v6 = At(d6());
function g6(e) {
  return e != null && typeof e == "object" && Array.isArray(e) === !1;
}
a(g6, "isObject");
var m6 = typeof global == "object" && global && global.Object === Object && global, w6 = m6, y6 = typeof self == "object" && self && self.Object ===
Object && self, R6 = w6 || y6 || Function("return this")(), $r = R6, S6 = $r.Symbol, ye = S6, el = Object.prototype, I6 = el.hasOwnProperty,
x6 = el.toString, Ue = ye ? ye.toStringTag : void 0;
function A6(e) {
  var t = I6.call(e, Ue), r = e[Ue];
  try {
    e[Ue] = void 0;
    var n = !0;
  } catch {
  }
  var o = x6.call(e);
  return n && (t ? e[Ue] = r : delete e[Ue]), o;
}
a(A6, "getRawTag");
var E6 = A6, _6 = Object.prototype, b6 = _6.toString;
function P6(e) {
  return b6.call(e);
}
a(P6, "objectToString");
var M6 = P6, C6 = "[object Null]", z6 = "[object Undefined]", $i = ye ? ye.toStringTag : void 0;
function H6(e) {
  return e == null ? e === void 0 ? z6 : C6 : $i && $i in Object(e) ? E6(e) : M6(e);
}
a(H6, "baseGetTag");
var tl = H6;
function O6(e) {
  return e != null && typeof e == "object";
}
a(O6, "isObjectLike");
var L6 = O6, T6 = "[object Symbol]";
function B6(e) {
  return typeof e == "symbol" || L6(e) && tl(e) == T6;
}
a(B6, "isSymbol");
var Kr = B6;
function q6(e, t) {
  for (var r = -1, n = e == null ? 0 : e.length, o = Array(n); ++r < n; )
    o[r] = t(e[r], r, e);
  return o;
}
a(q6, "arrayMap");
var V6 = q6, D6 = Array.isArray, Wr = D6, N6 = 1 / 0, Ki = ye ? ye.prototype : void 0, Wi = Ki ? Ki.toString : void 0;
function rl(e) {
  if (typeof e == "string")
    return e;
  if (Wr(e))
    return V6(e, rl) + "";
  if (Kr(e))
    return Wi ? Wi.call(e) : "";
  var t = e + "";
  return t == "0" && 1 / e == -N6 ? "-0" : t;
}
a(rl, "baseToString");
var j6 = rl;
function F6(e) {
  var t = typeof e;
  return e != null && (t == "object" || t == "function");
}
a(F6, "isObject2");
var al = F6, G6 = "[object AsyncFunction]", U6 = "[object Function]", k6 = "[object GeneratorFunction]", $6 = "[object Proxy]";
function K6(e) {
  if (!al(e))
    return !1;
  var t = tl(e);
  return t == U6 || t == k6 || t == G6 || t == $6;
}
a(K6, "isFunction");
var W6 = K6, Y6 = $r["__core-js_shared__"], Ur = Y6, Yi = function() {
  var e = /[^.]+$/.exec(Ur && Ur.keys && Ur.keys.IE_PROTO || "");
  return e ? "Symbol(src)_1." + e : "";
}();
function J6(e) {
  return !!Yi && Yi in e;
}
a(J6, "isMasked");
var Q6 = J6, X6 = Function.prototype, Z6 = X6.toString;
function ev(e) {
  if (e != null) {
    try {
      return Z6.call(e);
    } catch {
    }
    try {
      return e + "";
    } catch {
    }
  }
  return "";
}
a(ev, "toSource");
var tv = ev, rv = /[\\^$.*+?()[\]{}|]/g, av = /^\[object .+?Constructor\]$/, nv = Function.prototype, ov = Object.prototype, iv = nv.toString,
lv = ov.hasOwnProperty, sv = RegExp(
  "^" + iv.call(lv).replace(rv, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function cv(e) {
  if (!al(e) || Q6(e))
    return !1;
  var t = W6(e) ? sv : av;
  return t.test(tv(e));
}
a(cv, "baseIsNative");
var fv = cv;
function uv(e, t) {
  return e?.[t];
}
a(uv, "getValue");
var dv = uv;
function hv(e, t) {
  var r = dv(e, t);
  return fv(r) ? r : void 0;
}
a(hv, "getNative");
var nl = hv;
function pv(e, t) {
  return e === t || e !== e && t !== t;
}
a(pv, "eq");
var vv = pv, gv = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, mv = /^\w*$/;
function wv(e, t) {
  if (Wr(e))
    return !1;
  var r = typeof e;
  return r == "number" || r == "symbol" || r == "boolean" || e == null || Kr(e) ? !0 : mv.test(e) || !gv.test(e) || t != null && e in Object(
  t);
}
a(wv, "isKey");
var yv = wv, Rv = nl(Object, "create"), ke = Rv;
function Sv() {
  this.__data__ = ke ? ke(null) : {}, this.size = 0;
}
a(Sv, "hashClear");
var Iv = Sv;
function xv(e) {
  var t = this.has(e) && delete this.__data__[e];
  return this.size -= t ? 1 : 0, t;
}
a(xv, "hashDelete");
var Av = xv, Ev = "__lodash_hash_undefined__", _v = Object.prototype, bv = _v.hasOwnProperty;
function Pv(e) {
  var t = this.__data__;
  if (ke) {
    var r = t[e];
    return r === Ev ? void 0 : r;
  }
  return bv.call(t, e) ? t[e] : void 0;
}
a(Pv, "hashGet");
var Mv = Pv, Cv = Object.prototype, zv = Cv.hasOwnProperty;
function Hv(e) {
  var t = this.__data__;
  return ke ? t[e] !== void 0 : zv.call(t, e);
}
a(Hv, "hashHas");
var Ov = Hv, Lv = "__lodash_hash_undefined__";
function Tv(e, t) {
  var r = this.__data__;
  return this.size += this.has(e) ? 0 : 1, r[e] = ke && t === void 0 ? Lv : t, this;
}
a(Tv, "hashSet");
var Bv = Tv;
function Re(e) {
  var t = -1, r = e == null ? 0 : e.length;
  for (this.clear(); ++t < r; ) {
    var n = e[t];
    this.set(n[0], n[1]);
  }
}
a(Re, "Hash");
Re.prototype.clear = Iv;
Re.prototype.delete = Av;
Re.prototype.get = Mv;
Re.prototype.has = Ov;
Re.prototype.set = Bv;
var Ji = Re;
function qv() {
  this.__data__ = [], this.size = 0;
}
a(qv, "listCacheClear");
var Vv = qv;
function Dv(e, t) {
  for (var r = e.length; r--; )
    if (vv(e[r][0], t))
      return r;
  return -1;
}
a(Dv, "assocIndexOf");
var _t = Dv, Nv = Array.prototype, jv = Nv.splice;
function Fv(e) {
  var t = this.__data__, r = _t(t, e);
  if (r < 0)
    return !1;
  var n = t.length - 1;
  return r == n ? t.pop() : jv.call(t, r, 1), --this.size, !0;
}
a(Fv, "listCacheDelete");
var Gv = Fv;
function Uv(e) {
  var t = this.__data__, r = _t(t, e);
  return r < 0 ? void 0 : t[r][1];
}
a(Uv, "listCacheGet");
var kv = Uv;
function $v(e) {
  return _t(this.__data__, e) > -1;
}
a($v, "listCacheHas");
var Kv = $v;
function Wv(e, t) {
  var r = this.__data__, n = _t(r, e);
  return n < 0 ? (++this.size, r.push([e, t])) : r[n][1] = t, this;
}
a(Wv, "listCacheSet");
var Yv = Wv;
function Se(e) {
  var t = -1, r = e == null ? 0 : e.length;
  for (this.clear(); ++t < r; ) {
    var n = e[t];
    this.set(n[0], n[1]);
  }
}
a(Se, "ListCache");
Se.prototype.clear = Vv;
Se.prototype.delete = Gv;
Se.prototype.get = kv;
Se.prototype.has = Kv;
Se.prototype.set = Yv;
var Jv = Se, Qv = nl($r, "Map"), Xv = Qv;
function Zv() {
  this.size = 0, this.__data__ = {
    hash: new Ji(),
    map: new (Xv || Jv)(),
    string: new Ji()
  };
}
a(Zv, "mapCacheClear");
var e8 = Zv;
function t8(e) {
  var t = typeof e;
  return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? e !== "__proto__" : e === null;
}
a(t8, "isKeyable");
var r8 = t8;
function a8(e, t) {
  var r = e.__data__;
  return r8(t) ? r[typeof t == "string" ? "string" : "hash"] : r.map;
}
a(a8, "getMapData");
var bt = a8;
function n8(e) {
  var t = bt(this, e).delete(e);
  return this.size -= t ? 1 : 0, t;
}
a(n8, "mapCacheDelete");
var o8 = n8;
function i8(e) {
  return bt(this, e).get(e);
}
a(i8, "mapCacheGet");
var l8 = i8;
function s8(e) {
  return bt(this, e).has(e);
}
a(s8, "mapCacheHas");
var c8 = s8;
function f8(e, t) {
  var r = bt(this, e), n = r.size;
  return r.set(e, t), this.size += r.size == n ? 0 : 1, this;
}
a(f8, "mapCacheSet");
var u8 = f8;
function Ie(e) {
  var t = -1, r = e == null ? 0 : e.length;
  for (this.clear(); ++t < r; ) {
    var n = e[t];
    this.set(n[0], n[1]);
  }
}
a(Ie, "MapCache");
Ie.prototype.clear = e8;
Ie.prototype.delete = o8;
Ie.prototype.get = l8;
Ie.prototype.has = c8;
Ie.prototype.set = u8;
var ol = Ie, d8 = "Expected a function";
function Yr(e, t) {
  if (typeof e != "function" || t != null && typeof t != "function")
    throw new TypeError(d8);
  var r = /* @__PURE__ */ a(function() {
    var n = arguments, o = t ? t.apply(this, n) : n[0], i = r.cache;
    if (i.has(o))
      return i.get(o);
    var c = e.apply(this, n);
    return r.cache = i.set(o, c) || i, c;
  }, "memoized");
  return r.cache = new (Yr.Cache || ol)(), r;
}
a(Yr, "memoize");
Yr.Cache = ol;
var h8 = Yr, p8 = 500;
function v8(e) {
  var t = h8(e, function(n) {
    return r.size === p8 && r.clear(), n;
  }), r = t.cache;
  return t;
}
a(v8, "memoizeCapped");
var g8 = v8, m8 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, w8 = /\\(\\)?/g, y8 = g8(
function(e) {
  var t = [];
  return e.charCodeAt(0) === 46 && t.push(""), e.replace(m8, function(r, n, o, i) {
    t.push(o ? i.replace(w8, "$1") : n || r);
  }), t;
}), R8 = y8;
function S8(e) {
  return e == null ? "" : j6(e);
}
a(S8, "toString");
var I8 = S8;
function x8(e, t) {
  return Wr(e) ? e : yv(e, t) ? [e] : R8(I8(e));
}
a(x8, "castPath");
var A8 = x8, E8 = 1 / 0;
function _8(e) {
  if (typeof e == "string" || Kr(e))
    return e;
  var t = e + "";
  return t == "0" && 1 / e == -E8 ? "-0" : t;
}
a(_8, "toKey");
var b8 = _8;
function P8(e, t) {
  t = A8(t, e);
  for (var r = 0, n = t.length; e != null && r < n; )
    e = e[b8(t[r++])];
  return r && r == n ? e : void 0;
}
a(P8, "baseGet");
var M8 = P8;
function C8(e, t, r) {
  var n = e == null ? void 0 : M8(e, t);
  return n === void 0 ? r : n;
}
a(C8, "get");
var z8 = C8, Et = g6, H8 = /* @__PURE__ */ a((e) => {
  let t = null, r = !1, n = !1, o = !1, i = "";
  if (e.indexOf("//") >= 0 || e.indexOf("/*") >= 0)
    for (let c = 0; c < e.length; c += 1)
      !t && !r && !n && !o ? e[c] === '"' || e[c] === "'" || e[c] === "`" ? t = e[c] : e[c] === "/" && e[c + 1] === "*" ? r = !0 : e[c] === "\
/" && e[c + 1] === "/" ? n = !0 : e[c] === "/" && e[c + 1] !== "/" && (o = !0) : (t && (e[c] === t && e[c - 1] !== "\\" || e[c] === `
` && t !== "`") && (t = null), o && (e[c] === "/" && e[c - 1] !== "\\" || e[c] === `
`) && (o = !1), r && e[c - 1] === "/" && e[c - 2] === "*" && (r = !1), n && e[c] === `
` && (n = !1)), !r && !n && (i += e[c]);
  else
    i = e;
  return i;
}, "removeCodeComments"), O8 = (0, il.default)(1e4)(
  (e) => H8(e).replace(/\n\s*/g, "").trim()
), L8 = /* @__PURE__ */ a(function(t, r) {
  let n = r.slice(0, r.indexOf("{")), o = r.slice(r.indexOf("{"));
  if (n.includes("=>") || n.includes("function"))
    return r;
  let i = n;
  return i = i.replace(t, "function"), i + o;
}, "convertShorthandMethods2"), T8 = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/, B8 = /* @__PURE__ */ a((e) => e.match(/^[\[\{\"\}].*[\]\}\"]$/),
"isJSON");
function ll(e) {
  if (!Et(e))
    return e;
  let t = e, r = !1;
  return typeof Event < "u" && e instanceof Event && (t = ki(t), r = !0), t = Object.keys(t).reduce((n, o) => {
    try {
      t[o] && t[o].toJSON, n[o] = t[o];
    } catch {
      r = !0;
    }
    return n;
  }, {}), r ? t : e;
}
a(ll, "convertUnconventionalData");
var q8 = /* @__PURE__ */ a(function(t) {
  let r, n, o, i;
  return /* @__PURE__ */ a(function(l, s) {
    try {
      if (l === "")
        return i = [], r = /* @__PURE__ */ new Map([[s, "[]"]]), n = /* @__PURE__ */ new Map(), o = [], s;
      let u = n.get(this) || this;
      for (; o.length && u !== o[0]; )
        o.shift(), i.pop();
      if (typeof s == "boolean")
        return s;
      if (s === void 0)
        return t.allowUndefined ? "_undefined_" : void 0;
      if (s === null)
        return null;
      if (typeof s == "number")
        return s === -1 / 0 ? "_-Infinity_" : s === 1 / 0 ? "_Infinity_" : Number.isNaN(s) ? "_NaN_" : s;
      if (typeof s == "bigint")
        return `_bigint_${s.toString()}`;
      if (typeof s == "string")
        return T8.test(s) ? t.allowDate ? `_date_${s}` : void 0 : s;
      if ((0, h6.default)(s))
        return t.allowRegExp ? `_regexp_${s.flags}|${s.source}` : void 0;
      if ((0, p6.default)(s)) {
        if (!t.allowFunction)
          return;
        let { name: h } = s, v = s.toString();
        return v.match(
          /(\[native code\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/
        ) ? `_function_${h}|${(() => {
        }).toString()}` : `_function_${h}|${O8(L8(l, v))}`;
      }
      if ((0, v6.default)(s)) {
        if (!t.allowSymbol)
          return;
        let h = Symbol.keyFor(s);
        return h !== void 0 ? `_gsymbol_${h}` : `_symbol_${s.toString().slice(7, -1)}`;
      }
      if (o.length >= t.maxDepth)
        return Array.isArray(s) ? `[Array(${s.length})]` : "[Object]";
      if (s === this)
        return `_duplicate_${JSON.stringify(i)}`;
      if (s instanceof Error && t.allowError)
        return {
          __isConvertedError__: !0,
          errorProperties: {
            ...s.cause ? { cause: s.cause } : {},
            ...s,
            name: s.name,
            message: s.message,
            stack: s.stack,
            "_constructor-name_": s.constructor.name
          }
        };
      if (s.constructor && s.constructor.name && s.constructor.name !== "Object" && !Array.isArray(s) && !t.allowClass)
        return;
      let d = r.get(s);
      if (!d) {
        let h = Array.isArray(s) ? s : ll(s);
        if (s.constructor && s.constructor.name && s.constructor.name !== "Object" && !Array.isArray(s) && t.allowClass)
          try {
            Object.assign(h, { "_constructor-name_": s.constructor.name });
          } catch {
          }
        return i.push(l), o.unshift(h), r.set(s, JSON.stringify(i)), s !== h && n.set(s, h), h;
      }
      return `_duplicate_${d}`;
    } catch {
      return;
    }
  }, "replace");
}, "replacer2"), V8 = /* @__PURE__ */ a(function reviver(options) {
  let refs = [], root;
  return /* @__PURE__ */ a(function revive(key, value) {
    if (key === "" && (root = value, refs.forEach(({ target: e, container: t, replacement: r }) => {
      let n = B8(r) ? JSON.parse(r) : r.split(".");
      n.length === 0 ? t[e] = root : t[e] = z8(root, n);
    })), key === "_constructor-name_")
      return value;
    if (Et(value) && value.__isConvertedError__) {
      let { message: e, ...t } = value.errorProperties, r = new Error(e);
      return Object.assign(r, t), r;
    }
    if (Et(value) && value["_constructor-name_"] && options.allowFunction) {
      let e = value["_constructor-name_"];
      if (e !== "Object") {
        let t = new Function(`return function ${e.replace(/[^a-zA-Z0-9$_]+/g, "")}(){}`)();
        Object.setPrototypeOf(value, new t());
      }
      return delete value["_constructor-name_"], value;
    }
    if (typeof value == "string" && value.startsWith("_function_") && options.allowFunction) {
      let [, name, source] = value.match(/_function_([^|]*)\|(.*)/) || [], sourceSanitized = source.replace(/[(\(\))|\\| |\]|`]*$/, "");
      if (!options.lazyEval)
        return eval(`(${sourceSanitized})`);
      let result = /* @__PURE__ */ a((...args) => {
        let f = eval(`(${sourceSanitized})`);
        return f(...args);
      }, "result");
      return Object.defineProperty(result, "toString", {
        value: /* @__PURE__ */ a(() => sourceSanitized, "value")
      }), Object.defineProperty(result, "name", {
        value: name
      }), result;
    }
    if (typeof value == "string" && value.startsWith("_regexp_") && options.allowRegExp) {
      let [, e, t] = value.match(/_regexp_([^|]*)\|(.*)/) || [];
      return new RegExp(t, e);
    }
    return typeof value == "string" && value.startsWith("_date_") && options.allowDate ? new Date(value.replace("_date_", "")) : typeof value ==
    "string" && value.startsWith("_duplicate_") ? (refs.push({ target: key, container: this, replacement: value.replace(/^_duplicate_/, "") }),
    null) : typeof value == "string" && value.startsWith("_symbol_") && options.allowSymbol ? Symbol(value.replace("_symbol_", "")) : typeof value ==
    "string" && value.startsWith("_gsymbol_") && options.allowSymbol ? Symbol.for(value.replace("_gsymbol_", "")) : typeof value == "string" &&
    value === "_-Infinity_" ? -1 / 0 : typeof value == "string" && value === "_Infinity_" ? 1 / 0 : typeof value == "string" && value === "_\
NaN_" ? NaN : typeof value == "string" && value.startsWith("_bigint_") && typeof BigInt == "function" ? BigInt(value.replace("_bigint_", "")) :
    value;
  }, "revive");
}, "reviver"), sl = {
  maxDepth: 10,
  space: void 0,
  allowFunction: !0,
  allowRegExp: !0,
  allowDate: !0,
  allowClass: !0,
  allowError: !0,
  allowUndefined: !0,
  allowSymbol: !0,
  lazyEval: !0
}, cl = /* @__PURE__ */ a((e, t = {}) => {
  let r = { ...sl, ...t };
  return JSON.stringify(ll(e), q8(r), t.space);
}, "stringify"), D8 = /* @__PURE__ */ a(() => {
  let e = /* @__PURE__ */ new Map();
  return /* @__PURE__ */ a(function t(r) {
    Et(r) && Object.entries(r).forEach(([n, o]) => {
      o === "_undefined_" ? r[n] = void 0 : e.get(o) || (e.set(o, !0), t(o));
    }), Array.isArray(r) && r.forEach((n, o) => {
      n === "_undefined_" ? (e.set(n, !0), r[o] = void 0) : e.get(n) || (e.set(n, !0), t(n));
    });
  }, "mutateUndefined");
}, "mutator"), fl = /* @__PURE__ */ a((e, t = {}) => {
  let r = { ...sl, ...t }, n = JSON.parse(e, V8(r));
  return D8()(n), n;
}, "parse");

// src/manager-api/lib/store-setup.ts
var ul = /* @__PURE__ */ a((e) => {
  e.fn("set", function(t, r) {
    return e.set(this._area, this._in(t), cl(r, { maxDepth: 50 }));
  }), e.fn("get", function(t, r) {
    let n = e.get(this._area, this._in(t));
    return n !== null ? fl(n) : r || n;
  });
}, "default");

// src/manager-api/store.ts
ul(xe.default._);
var dl = "@storybook/manager/store";
function Jr(e) {
  return e.get(dl) || {};
}
a(Jr, "get");
function N8(e, t) {
  return e.set(dl, t);
}
a(N8, "set");
function j8(e, t) {
  let r = Jr(e);
  return N8(e, { ...r, ...t });
}
a(j8, "update");
var Qr = class Qr {
  constructor({ setState: t, getState: r }) {
    this.upstreamSetState = t, this.upstreamGetState = r;
  }
  // The assumption is that this will be called once, to initialize the React state
  // when the module is instantiated
  getInitialState(t) {
    return { ...t, ...Jr(xe.default.local), ...Jr(xe.default.session) };
  }
  getState() {
    return this.upstreamGetState();
  }
  async setState(t, r, n) {
    let o, i;
    typeof r == "function" ? (o = r, i = n) : i = r;
    let { persistence: c = "none" } = i || {}, l = {}, s = {};
    typeof t == "function" ? l = /* @__PURE__ */ a((d) => (s = t(d), s), "patch") : (l = t, s = l);
    let u = await new Promise((d) => {
      this.upstreamSetState(l, () => {
        d(this.getState());
      });
    });
    if (c !== "none") {
      let d = c === "session" ? xe.default.session : xe.default.local;
      await j8(d, s);
    }
    return o && o(u), u;
  }
};
a(Qr, "Store");
var $e = Qr;

// src/manager-api/lib/request-response.ts
var Xr = class Xr extends Error {
  constructor(r, n) {
    super(r);
    this.payload = void 0;
    this.payload = n;
  }
};
a(Xr, "RequestResponseError");
var Pt = Xr, AI = /* @__PURE__ */ a((e, t, r, n, o = 5e3) => {
  let i;
  return new Promise((c, l) => {
    let s = {
      id: Math.random().toString(16).slice(2),
      payload: n
    }, u = /* @__PURE__ */ a((d) => {
      d.id === s.id && (clearTimeout(i), e.off(r, u), d.success ? c(d.payload) : l(new Pt(d.error, d.payload)));
    }, "responseHandler");
    e.emit(t, s), e.on(r, u), i = setTimeout(() => {
      e.off(r, u), l(new Pt("Timed out waiting for response"));
    }, o);
  });
}, "experimental_requestResponse");

// src/manager-api/root.tsx
var { ActiveTabs: LI } = Rt;
var Ct = R1({ api: void 0, state: ht({}) }), ni = /* @__PURE__ */ a((...e) => (0, wl.default)({}, ...e, (t, r) => {
  if (Array.isArray(r))
    return r;
}), "combineParameters"), Mt = class Mt extends F8 {
  constructor(r) {
    super(r);
    this.api = {};
    this.initModules = /* @__PURE__ */ a(() => {
      this.modules.forEach((r) => {
        "init" in r && r.init();
      });
    }, "initModules");
    let {
      location: n,
      path: o,
      refId: i,
      viewMode: c = r.docsOptions.docsMode ? "docs" : r.viewMode,
      singleStory: l,
      storyId: s,
      docsOptions: u,
      navigate: d
    } = r, h = new $e({
      getState: /* @__PURE__ */ a(() => this.state, "getState"),
      setState: /* @__PURE__ */ a((R, S) => (this.setState(R, () => S(this.state)), this.state), "setState")
    }), v = { location: n, path: o, viewMode: c, singleStory: l, storyId: s, refId: i }, g = { docsOptions: u };
    this.state = h.getInitialState(ht({ ...v, ...g }));
    let m = {
      navigate: d,
      store: h,
      provider: r.provider
    };
    this.modules = [
      br,
      fr,
      cr,
      Rt,
      _r,
      Pr,
      Br,
      Vr,
      Sr,
      Ir,
      jr,
      Fr,
      Gr
    ].map(
      (R) => R.init({ ...v, ...g, ...m, state: this.state, fullAPI: this.api })
    );
    let w = ht(this.state, ...this.modules.map((R) => R.state)), y = Object.assign(this.api, { navigate: d }, ...this.modules.map((R) => R.api));
    this.state = w, this.api = y;
  }
  static getDerivedStateFromProps(r, n) {
    return n.path !== r.path ? {
      ...n,
      location: r.location,
      path: r.path,
      refId: r.refId,
      viewMode: r.viewMode,
      storyId: r.storyId
    } : null;
  }
  shouldComponentUpdate(r, n) {
    let o = this.state, i = this.props;
    return o !== n || i.path !== r.path;
  }
  render() {
    let { children: r } = this.props, n = {
      state: this.state,
      api: this.api
    };
    return /* @__PURE__ */ Ae.createElement($8, { effect: this.initModules }, /* @__PURE__ */ Ae.createElement(Ct.Provider, { value: n }, /* @__PURE__ */ Ae.
    createElement(W8, null, r)));
  }
};
a(Mt, "ManagerProvider"), Mt.displayName = "Manager";
var gl = Mt, $8 = /* @__PURE__ */ a(({ children: e, effect: t }) => (Ae.useEffect(t, []), e), "EffectOnMount"), K8 = /* @__PURE__ */ a((e) => e,
"defaultFilter");
function W8({
  // @ts-expect-error (Converted from ts-ignore)
  filter: e = K8,
  children: t
}) {
  let r = t0(Ct), n = pl(t), o = pl(e);
  if (typeof n.current != "function")
    return /* @__PURE__ */ Ae.createElement(G8, null, n.current);
  let i = o.current(r), c = e0(() => [...Object.entries(i).reduce((l, s) => l.concat(s), [])], [r.state]);
  return e0(() => {
    let l = n.current;
    return /* @__PURE__ */ Ae.createElement(l, { ...i });
  }, c);
}
a(W8, "ManagerConsumer");
function TI() {
  let { state: e } = t0(Ct);
  return {
    ...e,
    // deprecated fields for back-compat
    get storiesHash() {
      return Zr("state.storiesHash is deprecated, please use state.index"), this.index || {};
    },
    get storiesConfigured() {
      return Zr("state.storiesConfigured is deprecated, please use state.previewInitialized"), this.previewInitialized;
    },
    get storiesFailed() {
      return Zr("state.storiesFailed is deprecated, please use state.indexError"), this.indexError;
    }
  };
}
a(TI, "useStorybookState");
function X() {
  let { api: e } = t0(Ct);
  return e;
}
a(X, "useStorybookApi");
function yl(e, t) {
  return typeof e > "u" ? t : e;
}
a(yl, "orDefault");
var Y8 = /* @__PURE__ */ a((e, t = []) => {
  let r = X();
  return ml(() => (Object.entries(e).forEach(([n, o]) => r.on(n, o)), () => {
    Object.entries(e).forEach(([n, o]) => r.off(n, o));
  }), t), r.emit;
}, "useChannel");
function BI(e) {
  return X().isPrepared(e);
}
a(BI, "useStoryPrepared");
function qI(e, t) {
  let n = X().getCurrentParameter(e);
  return yl(n, t);
}
a(qI, "useParameter");
globalThis.STORYBOOK_ADDON_STATE = {};
var { STORYBOOK_ADDON_STATE: W } = globalThis;
function J8(e, t) {
  let r = X(), n = r.getAddonState(e) || W[e], o = yl(
    n,
    W[e] ? W[e] : t
  ), i = !1;
  o === t && t !== void 0 && (W[e] = t, i = !0), ml(() => {
    i && r.setAddonState(e, t);
  }, [i]);
  let c = /* @__PURE__ */ a(async (u, d) => {
    await r.setAddonState(e, u, d);
    let h = r.getAddonState(e);
    return W[e] = h, h;
  }, "setState"), l = e0(() => {
    let u = {
      [`${vl}-client-${e}`]: c,
      [`${Ke}-client-${e}`]: c
    }, d = {
      [U8]: async () => {
        let h = r.getAddonState(e);
        h ? (W[e] = h, r.emit(`${Ke}-manager-${e}`, h)) : W[e] ? (await c(W[e]), r.emit(`${Ke}-manager-${e}`, W[e])) : t !== void 0 && (await c(
        t), W[e] = t, r.emit(`${Ke}-manager-${e}`, t));
      },
      [k8]: () => {
        let h = r.getAddonState(e);
        h !== void 0 && r.emit(`${Ke}-manager-${e}`, h);
      }
    };
    return {
      ...u,
      ...d
    };
  }, [e]), s = Y8(l);
  return [
    o,
    async (u, d) => {
      await c(u, d);
      let h = r.getAddonState(e);
      s(`${vl}-manager-${e}`, h);
    }
  ];
}
a(J8, "useSharedState");
function VI(e, t) {
  return J8(e, t);
}
a(VI, "useAddonState");
function DI() {
  let { getCurrentStoryData: e, updateStoryArgs: t, resetStoryArgs: r } = X(), n = e(), o = n?.type === "story" ? n.args : {}, i = n?.type ===
  "story" ? n.initialArgs : {}, c = hl(
    (s) => t(n, s),
    [n, t]
  ), l = hl(
    (s) => r(n, s),
    [n, r]
  );
  return [o, c, l, i];
}
a(DI, "useArgs");
function NI() {
  let e = X();
  return [e.getGlobals(), e.updateGlobals, e.getStoryGlobals(), e.getUserGlobals()];
}
a(NI, "useGlobals");
function jI() {
  return X().getGlobalTypes();
}
a(jI, "useGlobalTypes");
function Q8() {
  let { getCurrentStoryData: e } = X();
  return e();
}
a(Q8, "useCurrentStory");
function FI() {
  let e = Q8();
  return e?.type === "story" && e.argTypes || {};
}
a(FI, "useArgTypes");
var GI = No;
export {
  LI as ActiveTabs,
  W8 as Consumer,
  Ct as ManagerContext,
  gl as Provider,
  Pt as RequestResponseError,
  t7 as addons,
  ni as combineParameters,
  zS as controlOrMetaKey,
  CS as controlOrMetaSymbol,
  OS as eventMatchesShortcut,
  zr as eventToShortcut,
  AI as experimental_requestResponse,
  Cr as isMacLike,
  HS as isShortcutTaken,
  op as keyToSymbol,
  K as merge,
  nr as mockChannel,
  np as optionOrAltSymbol,
  Hr as shortcutMatchesShortcut,
  LS as shortcutToHumanString,
  GI as types,
  VI as useAddonState,
  FI as useArgTypes,
  DI as useArgs,
  Y8 as useChannel,
  jI as useGlobalTypes,
  NI as useGlobals,
  qI as useParameter,
  J8 as useSharedState,
  BI as useStoryPrepared,
  X as useStorybookApi,
  TI as useStorybookState
};
